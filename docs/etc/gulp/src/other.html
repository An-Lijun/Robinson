<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Apis | Robinson</title>
    <meta name="description" content="Documentations of @taiyuuki/utils">
    <link rel="preload stylesheet" href="/Robinson/assets/style.bad834b4.css" as="style">
    
    <script type="module" src="/Robinson/assets/app.a445b98c.js"></script>
    <link rel="preload" href="/Robinson/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/Robinson/assets/chunks/framework.a333c6fb.js">
    <link rel="modulepreload" href="/Robinson/assets/chunks/theme.f8dc611f.js">
    <link rel="modulepreload" href="/Robinson/assets/etc_gulp_src_other.md.9c8e9772.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-89b44ac5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-3838169b></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-3838169b> Skip to content </a><!--]--><!----><header class="VPNav" data-v-89b44ac5 data-v-ead7b100><div class="VPNavBar has-sidebar" data-v-ead7b100 data-v-ddf58ac8><div class="container" data-v-ddf58ac8><div class="title" data-v-ddf58ac8><div class="VPNavBarTitle has-sidebar" data-v-ddf58ac8 data-v-6b477778><a class="title" href="/Robinson/" data-v-6b477778><!--[--><!--]--><!----><!--[-->Robinson<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-ddf58ac8><div class="curtain" data-v-ddf58ac8></div><div class="content-body" data-v-ddf58ac8><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ddf58ac8><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ddf58ac8 data-v-aa3961f2><span id="main-nav-aria-label" class="visually-hidden" data-v-aa3961f2>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Robinson/index.html" tabindex="0" data-v-aa3961f2 data-v-03a86e44><!--[--><span data-v-03a86e44>主页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-aa3961f2 data-v-734feefb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-734feefb><span class="text" data-v-734feefb><!----><span data-v-734feefb>API</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-734feefb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-734feefb><div class="VPMenu" data-v-734feefb data-v-ee2001cd><div class="items" data-v-ee2001cd><!--[--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/doc/index.html" data-v-1fa06dfa><!--[-->1.x 文档<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Robinson/etc/report.html" tabindex="0" data-v-aa3961f2 data-v-03a86e44><!--[--><span data-v-03a86e44>测试报告</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Robinson/etc/changelog.html" tabindex="0" data-v-aa3961f2 data-v-03a86e44><!--[--><span data-v-03a86e44>更新日志</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-aa3961f2 data-v-734feefb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-734feefb><span class="text" data-v-734feefb><!----><span data-v-734feefb>工程化</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-734feefb><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-734feefb><div class="VPMenu" data-v-734feefb data-v-ee2001cd><div class="items" data-v-ee2001cd><!--[--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/rollup/src/introduce.html" data-v-1fa06dfa><!--[-->Rollup文档<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/jest/src/introduction.html" data-v-1fa06dfa><!--[-->Jest文档<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/vitepress/src/introduce.html" data-v-1fa06dfa><!--[-->vitepress文档<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/apiExtractor/src/introduce.html" data-v-1fa06dfa><!--[-->apiExtractor文档<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-ee2001cd data-v-1fa06dfa><a class="VPLink link" href="/Robinson/etc/gulp/src/introduce.html" data-v-1fa06dfa><!--[-->gulp文档<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ddf58ac8 data-v-f793aa6a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f793aa6a data-v-7841b7c3 data-v-77e2f250><span class="check" data-v-77e2f250><span class="icon" data-v-77e2f250><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-7841b7c3><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-7841b7c3><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ddf58ac8 data-v-ebaeef4b data-v-ccd4cace><!--[--><a class="VPSocialLink no-icon" href="https://github.com/An-Lijun/Robinson" aria-label="github" target="_blank" rel="noopener" data-v-ccd4cace data-v-8c737ea5><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ddf58ac8 data-v-7f075c5a data-v-734feefb><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-734feefb><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-734feefb><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-734feefb><div class="VPMenu" data-v-734feefb data-v-ee2001cd><!----><!--[--><!--[--><!----><div class="group" data-v-7f075c5a><div class="item appearance" data-v-7f075c5a><p class="label" data-v-7f075c5a>Appearance</p><div class="appearance-action" data-v-7f075c5a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-7f075c5a data-v-7841b7c3 data-v-77e2f250><span class="check" data-v-77e2f250><span class="icon" data-v-77e2f250><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-7841b7c3><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-7841b7c3><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-7f075c5a><div class="item social-links" data-v-7f075c5a><div class="VPSocialLinks social-links-list" data-v-7f075c5a data-v-ccd4cace><!--[--><a class="VPSocialLink no-icon" href="https://github.com/An-Lijun/Robinson" aria-label="github" target="_blank" rel="noopener" data-v-ccd4cace data-v-8c737ea5><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ddf58ac8 data-v-2b35fa63><span class="container" data-v-2b35fa63><span class="top" data-v-2b35fa63></span><span class="middle" data-v-2b35fa63></span><span class="bottom" data-v-2b35fa63></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-89b44ac5 data-v-119bb771><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-119bb771><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-119bb771><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-119bb771>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-119bb771 data-v-dc3b5256><button data-v-dc3b5256>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-89b44ac5 data-v-3f048b60><div class="curtain" data-v-3f048b60></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3f048b60><span class="visually-hidden" id="sidebar-aria-label" data-v-3f048b60> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-3f048b60><section class="VPSidebarItem level-0 has-active" data-v-3f048b60 data-v-1a8766f9><div class="item" role="button" tabindex="0" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><h2 class="text" data-v-1a8766f9>gulp</h2><!----></div><div class="items" data-v-1a8766f9><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1a8766f9 data-v-1a8766f9><div class="item" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><a class="VPLink link link" href="/Robinson/etc/gulp/src/introduce.html" data-v-1a8766f9><!--[--><p class="text" data-v-1a8766f9>介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1a8766f9 data-v-1a8766f9><div class="item" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><a class="VPLink link link" href="/Robinson/etc/gulp/src/quick.html" data-v-1a8766f9><!--[--><p class="text" data-v-1a8766f9>快速上手</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1a8766f9 data-v-1a8766f9><div class="item" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><a class="VPLink link link" href="/Robinson/etc/gulp/src/core.html" data-v-1a8766f9><!--[--><p class="text" data-v-1a8766f9>核心概念</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1a8766f9 data-v-1a8766f9><div class="item" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><a class="VPLink link link" href="/Robinson/etc/gulp/src/usePlugin.html" data-v-1a8766f9><!--[--><p class="text" data-v-1a8766f9>使用插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1a8766f9 data-v-1a8766f9><div class="item" data-v-1a8766f9><div class="indicator" data-v-1a8766f9></div><a class="VPLink link link" href="/Robinson/etc/gulp/src/other.html" data-v-1a8766f9><!--[--><p class="text" data-v-1a8766f9>其他</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-89b44ac5 data-v-742fcff4><div class="VPDoc has-sidebar has-aside" data-v-742fcff4 data-v-e00b1889><!--[--><!--]--><div class="container" data-v-e00b1889><div class="aside" data-v-e00b1889><div class="aside-curtain" data-v-e00b1889></div><div class="aside-container" data-v-e00b1889><div class="aside-content" data-v-e00b1889><div class="VPDocAside" data-v-e00b1889 data-v-d93e28c6><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-d93e28c6 data-v-5c592a41><div class="content" data-v-5c592a41><div class="outline-marker" data-v-5c592a41></div><div class="outline-title" role="heading" aria-level="2" data-v-5c592a41>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-5c592a41><span class="visually-hidden" id="doc-outline-aria-label" data-v-5c592a41> Table of Contents for current page </span><ul class="root" data-v-5c592a41 data-v-647664d4><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-d93e28c6></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e00b1889><div class="content-container" data-v-e00b1889><!--[--><!--]--><!----><main class="main" data-v-e00b1889><div style="position:relative;" class="vp-doc _Robinson_etc_gulp_src_other" data-v-e00b1889><div><h1 id="apis" tabindex="-1">Apis <a class="header-anchor" href="#apis" aria-label="Permalink to &quot;Apis&quot;">​</a></h1><h2 id="src" tabindex="-1">src() <a class="header-anchor" href="#src" aria-label="Permalink to &quot;src()&quot;">​</a></h2><p>创建一个流，用于从文件系统读取 <a href="https://www.gulpjs.com.cn/docs/api/concepts#vinyl" target="_blank" rel="noreferrer">Vinyl</a> 对象。</p><p>**注：**BOMs(字节顺序标记)在 UTF-8 中没有任何作用，除非使用 <code>removeBOM</code> 选项禁用，否则 <code>src()</code> 将从读取的 UTF-8 文件中删除BOMs。</p><h3 id="用法​" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/src#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/src#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function copy() {</span></span>
<span class="line"><span style="color:#e1e4e8;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">    .pipe(dest(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.copy = copy;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function copy() {</span></span>
<span class="line"><span style="color:#000000;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#000000;">    .pipe(dest(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.copy = copy;</span></span></code></pre></div><h3 id="函数原型​" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/src#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/src#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">src(globs, [options])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">src(globs, [options])</span></span></code></pre></div><h4 id="参数​" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/src#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/src#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h4><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>globs</td><td>string array</td><td>用于监视文件系统中匹配文件的 <a href="https://www.gulpjs.com.cn/docs/api/concepts#globs" target="_blank" rel="noreferrer">Globs</a> 。</td></tr><tr><td>options</td><td>object</td><td>在下面的 <a href="https://www.gulpjs.com.cn/docs/api/src#options" target="_blank" rel="noreferrer">选项</a> 中详细说明。</td></tr></tbody></table><h4 id="返回值​" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/src#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/src#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h4><p>返回一个可以在管道的开始或中间使用的流，用于根据给定的 globs 添加文件。</p><h4 id="可能出现的错误​" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/src#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/src#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h4><p>当 <code>globs</code> 参数只能匹配一个文件(如 <code>foo/bar.js</code>)而且没有找到匹配时，会抛出一个错误，提示 &quot;File not found with singular glob&quot;。若要抑制此错误，请将 <code>allowEmpty</code> 选项设置为 <code>true</code>。</p><p>当在 <code>globs</code> 中给出一个无效的 glob 时，抛出一个错误，并显示 &quot;Invalid glob argument&quot;。</p><h4 id="选项​" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/src#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/src#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h4><p><strong>对于接受函数的选项，传递的函数将与每个 Vinyl 对象一起调用，并且必须返回另一个列出类型的值。</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>encoding</td><td>string boolean</td><td>&quot;utf8&quot;</td><td>当为假时，文件内容将被视为二进制数据。当为字符串时，该字符串将用作文本编码。</td></tr><tr><td>buffer</td><td>boolean function</td><td>true</td><td>如果为 true，文件内容将被缓冲到内存中。如果为 false，Vinyl 对象的<code>contents</code>属性将是一个暂停的流。对于大文件，可能无法缓冲其内容。<strong>注意</strong>：插件可能不支持对流式内容的处理。</td></tr><tr><td>read</td><td>boolean function</td><td>true</td><td>如果为 false，文件将不会被读取，并且其对应的 Vinyl 对象也无法通过 <code>.dest()</code> 方法写入磁盘。.</td></tr><tr><td>since</td><td>date timestamp function</td><td></td><td>设置此值后，仅为自指定时间以来修改过的文件创建 Vinyl 对象。</td></tr><tr><td>removeBOM</td><td>boolean function</td><td>true</td><td>若为 true，则从 UTF - 8 编码的文件中移除字节顺序标记（BOM）。若为 false，则忽略字节顺序标记。</td></tr><tr><td>sourcemaps</td><td>boolean function</td><td>false</td><td>如果为 true，会在创建的 Vinyl 对象上启用源映射支持。加载内联源映射并解析外部源映射链接。</td></tr><tr><td>resolveSymlinks</td><td>boolean function</td><td>true</td><td>若为 <code>true</code>，则会递归地将符号链接解析为其目标文件。若为 <code>false</code>，则会保留符号链接，并将 Vinyl 对象的 <code>symlink</code> 属性设置为原始文件的路径。</td></tr><tr><td>cwd</td><td>string</td><td><code>process.cwd()</code></td><td>该目录将与任何相对路径相结合，以形成绝对路径。对于绝对路径，此设置会被忽略。使用此选项可避免使用 <code>path.join()</code> 来组合通配符模式。该选项会直接传递给 <code>glob-stream</code>。</td></tr><tr><td>base</td><td>string</td><td></td><td>显式设置所创建的 Vinyl 对象上的 <code>base</code> 属性。具体细节见 “API 概念” 部分。此选项会直接传递给 <code>glob-stream</code>。</td></tr><tr><td>cwdbase</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则 <code>cwd</code>（当前工作目录）和 <code>base</code> 选项应保持一致。此选项会直接传递给 <code>glob-stream</code>。</td></tr><tr><td>root</td><td>string</td><td></td><td>通配符模式所基于的根路径。此选项会直接传递给 <code>glob-stream</code>。</td></tr><tr><td>allowEmpty</td><td>boolean</td><td>false</td><td>若为 <code>false</code>，对于那些只能匹配单个文件的通配符模式（例如 <code>foo/bar.js</code>），如果未找到匹配文件，将会抛出错误。若为 <code>true</code>，则会抑制通配符匹配失败的情况。此选项会直接传递给 <code>glob-stream</code>。</td></tr><tr><td>uniqueBy</td><td>string function</td><td><code>&#39;path&#39;</code></td><td>通过比较字符串属性名或函数的返回结果，从流中移除重复项。注意：使用函数时，该函数会接收流中的数据（包含 <code>cwd</code>、<code>base</code>、<code>path</code> 属性的对象）。</td></tr><tr><td>dot</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则会将通配符模式与点文件（如 <code>.gitignore</code>）进行匹配。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>nounique</td><td>boolean</td><td>false</td><td>若为 <code>false</code>，则会防止结果集中出现重复文件。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>debug</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，调试信息将被记录到命令行。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>nobrace</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则避免展开花括号集合，例如 <code>{a,b}</code> 或 <code>{1..3}</code>。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>noglobstar</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则将双星号通配符字符（<code>**</code>）视为单星号通配符字符（<code>*</code>）。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>noext</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则避免匹配扩展通配符模式，例如 <code>+(ab)</code>。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>nocase</td><td>boolean</td><td>false</td><td>如果为 <code>true</code>，则进行不区分大小写的匹配。注意：在不区分大小写的文件系统中，非通配符模式默认会进行不区分大小写的匹配。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>matchBase</td><td>boolean</td><td>false</td><td>如果为 <code>true</code> 且通配符模式中不包含任何 <code>/</code> 字符，则会遍历所有目录并匹配该通配符模式。例如，<code>*.js</code> 会被视为等同于 <code>**/*.js</code>。此选项会直接传递给 <code>anymatch</code>。</td></tr><tr><td>ignore</td><td>string array</td><td></td><td>用于从匹配结果中排除的通配符模式。此选项会与取反后的 <code>globs</code> 相结合。<strong>注意</strong>：无论其他设置如何，这些通配符模式始终会针对点文件（以点开头的文件）进行匹配。<em>此选项会直接传递给 <a href="https://github.com/micromatch/anymatch" target="_blank" rel="noreferrer">anymatch</a>。</em></td></tr></tbody></table><h3 id="资源映射-sourcemaps-​" tabindex="-1">资源映射（Sourcemaps）<a href="https://www.gulpjs.com.cn/docs/api/src#%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84sourcemaps" title="Direct link to 资源映射（Sourcemaps）" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#资源映射-sourcemaps-​" aria-label="Permalink to &quot;资源映射（Sourcemaps）[​](https://www.gulpjs.com.cn/docs/api/src#%E8%B5%84%E6%BA%90%E6%98%A0%E5%B0%84sourcemaps &quot;Direct link to 资源映射（Sourcemaps）&quot;)&quot;">​</a></h3><p>对资源映射（Sourcemap ）的支持已内置到 <code>src()</code> 和 <code>dest()</code> 中了，但是默认情况下是禁用的。开启此功能能够生成内联或外联的资源映射（Sourcemap）。</p><p>内联资源映射（sourcemaps）：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: true }));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#000000;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#000000;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: true }));</span></span></code></pre></div><p>外部资源映射：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: &#39;.&#39; }));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#000000;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#000000;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: &#39;.&#39; }));</span></span></code></pre></div><h1 id="dest" tabindex="-1">dest() <a class="header-anchor" href="#dest" aria-label="Permalink to &quot;dest()&quot;">​</a></h1><p>创建一个用于将 <a href="https://www.gulpjs.com.cn/docs/api/concepts#vinyl" target="_blank" rel="noreferrer">Vinyl</a> 对象写入到文件系统的流。</p><h2 id="用法​-1" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/dest#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-1" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/dest#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function copy() {</span></span>
<span class="line"><span style="color:#e1e4e8;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">    .pipe(dest(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.copy = copy;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function copy() {</span></span>
<span class="line"><span style="color:#000000;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#000000;">    .pipe(dest(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.copy = copy;</span></span></code></pre></div><h2 id="函数原型​-1" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/dest#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-1" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/dest#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">dest(directory, [options])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">dest(directory, [options])</span></span></code></pre></div><h3 id="参数​-1" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/dest#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-1" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/dest#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>directory <strong>（必须）</strong></td><td>string function</td><td>文件将被写入的输出目录的路径。如果使用了函数，则每个 Vinyl 对象都会调用该函数，并且必须返回字符串形式的目录路径。</td></tr><tr><td>options</td><td>object</td><td>详情见下文 <a href="https://www.gulpjs.com.cn/docs/api/dest#%E9%80%89%E9%A1%B9" target="_blank" rel="noreferrer">选项</a>。</td></tr></tbody></table><h3 id="返回值​-1" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/dest#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-1" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/dest#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个可以在管道的中间或末尾使用的流，用于在文件系统上创建文件。</p><p>每当 Vinyl 对象通过流被传递时，它将内容和其他细节写到给定目录下的文件系统。如果 Vinyl 对象具有 <code>symlink</code> 属性，将创建符号链接（symbolic link）而不是写入内容。创建文件后，将<a href="https://www.gulpjs.com.cn/docs/api/dest#metadata-updates" target="_blank" rel="noreferrer">更新其元数据</a>以匹配 Vinyl 对象。</p><p>在文件系统上创建文件时，Vinyl 对象将被修改。</p><ul><li><code>cwd</code>、<code>base</code> 和 <code>path</code> 属性将被更新以匹配创建的文件。</li><li><code>stat</code> 属性将被更新，以匹配文件系统上的文件。</li><li>如果 <code>contents</code> 属性是一个流，它将被重置，以便可以再次读取。</li></ul><h3 id="可能出现的错误​-1" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/dest#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-1" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/dest#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当目录为空字符串时，将抛出一个错误，并提示 &quot;Invalid dest() folder argument. Please specify a non-empty string or a function.&quot;（无效的 dest() 文件夹参数。请指定非空字符串或函数。）</p><p>当目录不是字符串或函数时，将抛出一个错误，并提示 &quot;Invalid dest() folder argument. Please specify a non-empty string or a function.&quot;</p><p>当 <code>directory</code> 是一个返回空字符串或 <code>undefined</code> 的函数时，将发出一条错误消息 “Invalid output folder”。</p><h3 id="选项​-1" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/dest#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​-1" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/dest#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h3><p><strong>对于接受函数的选项，传递的函数将与每个 Vinyl 对象一起调用，并且必须返回另一个列出类型的值。</strong></p><table><thead><tr><th>名称</th><th>类型</th><th>默认值</th><th>注解</th></tr></thead><tbody><tr><td>cwd</td><td>string function</td><td><code>process.cwd()</code></td><td>此目录可以与任何相对路径合并为绝对路径。如果是绝对路径，则忽略。该参数旨在避免通过 <code>directory</code> 和 <code>path.join()</code> 生成输出目录的路径的麻烦。</td></tr><tr><td>mode</td><td>number function</td><td>Vinyl 对象的 <code>stat.mode</code> 属性</td><td>创建文件时使用的模式。如果没有设置，并且缺少 <code>stat.mode</code>，则使用 process&#39; 模式。</td></tr><tr><td>dirMode</td><td>number function</td><td></td><td>创建目录时使用的模式。如果没有设置，将使用当前进程的模式。</td></tr><tr><td>overwrite</td><td>boolean function</td><td>true</td><td>如果为 true，则覆盖相同路径的现有文件。</td></tr><tr><td>append</td><td>boolean function</td><td>false</td><td>如果为 true，则将内容添加到文件末尾，而不是替换现有内容。</td></tr><tr><td>sourcemaps</td><td>boolean string function</td><td>false</td><td>如果为 true，则将内联 sourcemaps 写入输出文件。 如果指定一个 <code>string</code> 类型的路径，则在给定的路径出写入外部 <a href="https://www.gulpjs.com.cn/docs/api/dest#sourcemaps" target="_blank" rel="noreferrer">sourcemaps</a> 。</td></tr><tr><td>relativeSymlinks</td><td>boolean function</td><td>false</td><td>如果为 false，则创建的任何符号链接都将是绝对路径的。 <strong>注意</strong>：如果正在创建的是 junction，则将被忽略，因为他们必须是绝对路径。</td></tr><tr><td>useJunctions</td><td>boolean function</td><td>true</td><td>此选项仅用适用于 Windows，在其他操作系统中将被忽略。当设置为 true 时，则将目录符号链接创建为 junction。详情请参见下面的 <a href="https://www.gulpjs.com.cn/docs/api/dest#symbolic-links-on-windows" target="_blank" rel="noreferrer">Windows 上的符号链接</a> 。</td></tr></tbody></table><h2 id="元数据更新​" tabindex="-1">元数据更新<a href="https://www.gulpjs.com.cn/docs/api/dest#%E5%85%83%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0" title="Direct link to 元数据更新" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#元数据更新​" aria-label="Permalink to &quot;元数据更新[​](https://www.gulpjs.com.cn/docs/api/dest#%E5%85%83%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0 &quot;Direct link to 元数据更新&quot;)&quot;">​</a></h2><p>每当 <code>dest()</code> 流创建一个文件时，就会将 Vinyl 对象的 <code>mode</code>、<code>mtime</code> 和 <code>atime</code> 与创建的文件进行比较。如果它们不同，创建的文件将被更新以反映 Vinyl 对象的元数据。如果这些属性相同，或者 gulp 没有更改的权限，则会跳过该尝试。</p><p>在不支持 Node 的 <code>process.getuid()</code>或 <code>process.geteuid()</code> 方法的 Windows 或其他操作系统上禁用此功能。这是因为Windows通过使用 <code>fs.fchmod()</code> 和 `fs.futimes() 会产生意想不到的结果。</p><p><strong>注意</strong>: <code>fs.futimes()</code> 在内部将 <code>mtime</code> 和 <code>atime</code> 时间戳转换为秒。这种除以 1000 的方法可能会导致 32 位操作系统的精度有所下降。</p><h2 id="sourcemaps​" tabindex="-1">Sourcemaps<a href="https://www.gulpjs.com.cn/docs/api/dest#sourcemaps" title="Direct link to Sourcemaps" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#sourcemaps​" aria-label="Permalink to &quot;Sourcemaps[​](https://www.gulpjs.com.cn/docs/api/dest#sourcemaps &quot;Direct link to Sourcemaps&quot;)&quot;">​</a></h2><p>Sourcemap 支持直接构建到 <code>src()</code> 和 <code>dest()</code> 中，但默认情况下是禁用的。使其能够生成内联或外部 sourcemaps。</p><p>内联 sourcemaps:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: true }));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#000000;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#000000;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: true }));</span></span></code></pre></div><p>外部 sourcemaps:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#e1e4e8;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: &#39;.&#39; }));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const uglify = require(&#39;gulp-uglify&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">src(&#39;input/**/*.js&#39;, { sourcemaps: true })</span></span>
<span class="line"><span style="color:#000000;">  .pipe(uglify())</span></span>
<span class="line"><span style="color:#000000;">  .pipe(dest(&#39;output/&#39;, { sourcemaps: &#39;.&#39; }));</span></span></code></pre></div><h2 id="windows-上的符号链接​" tabindex="-1">Windows 上的符号链接<a href="https://www.gulpjs.com.cn/docs/api/dest#windows-%E4%B8%8A%E7%9A%84%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5" title="Direct link to Windows 上的符号链接" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#windows-上的符号链接​" aria-label="Permalink to &quot;Windows 上的符号链接[​](https://www.gulpjs.com.cn/docs/api/dest#windows-%E4%B8%8A%E7%9A%84%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5 &quot;Direct link to Windows 上的符号链接&quot;)&quot;">​</a></h2><p>在 Windows 上创建符号链接时，<code>type</code> 参数被传递给 Node 的 <code>fs.symlink()</code> 方法，该方法指定被链接的目标的类型。链接类型设置为:</p><ul><li><code>&#39;file&#39;</code>，当目标是一个常规文件时</li><li><code>&#39;junction&#39;</code>， 当目标是一个目录时</li><li><code>&#39;dir&#39;</code>， 当目标是一个目录并且用户禁用了 <code>useJunctions</code> 选项时</li></ul><p>如果试图创建 dangling (指向不存在的目标)链接，则无法自动确定链接类型。在这些情况下，根据 dangling 链接是通过 <code>symlink()</code> 创建的还是通过 <code>dest()</code> 创建的，行为会有所不同。</p><p>对于通过 <code>symlink()</code> 创建的 dangling 链接，传入的 Vinyl 对象表示目标，因此其 stats 将确定所需的链接类型。如果 <code>isDirectory()</code> 返回 false，则创建一个 <code>&#39;file&#39;</code> 链接，否则根据 <code>useJunctions</code> 选项的值创建一个 <code>&#39;junction&#39;</code> 或 <code>&#39;dir&#39;</code> 链接。</p><p>对于通过 <code>dest()</code> 创建的 dangling 链接，传入的 Vinyl 对象表示链接——通常通过 <code>src(..., { resolveSymlinks: false })</code> 从磁盘加载。在这种情况下，无法合理地确定链接类型，默认使用 <code>&#39;file&#39;</code>。如果正在创建指向目录的 dangling 链接，这可能会导致意外行为。<strong>避免这种情况。</strong></p><h1 id="symlink" tabindex="-1">symlink() <a class="header-anchor" href="#symlink" aria-label="Permalink to &quot;symlink()&quot;">​</a></h1><p>创建一个流（stream），用于连接 <a href="https://www.gulpjs.com.cn/docs/api/concepts#vinyl" target="_blank" rel="noreferrer">Vinyl</a> 对象到文件系统。</p><h2 id="用法​-2" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-2" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/symlink#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, symlink } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function link() {</span></span>
<span class="line"><span style="color:#e1e4e8;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">    .pipe(symlink(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.link = link;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, symlink } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function link() {</span></span>
<span class="line"><span style="color:#000000;">  return src(&#39;input/*.js&#39;)</span></span>
<span class="line"><span style="color:#000000;">    .pipe(symlink(&#39;output/&#39;));</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.link = link;</span></span></code></pre></div><h2 id="函数原型​-2" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-2" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/symlink#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">symlink(directory, [options])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">symlink(directory, [options])</span></span></code></pre></div><h3 id="参数​-2" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-2" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/symlink#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>directory <strong>(required)</strong></td><td>string function</td><td>The path of the output directory where symbolic links will be created. If a function is used, the function will be called with each Vinyl object and must return a string directory path.</td></tr><tr><td>options</td><td>object</td><td>Detailed in <a href="https://www.gulpjs.com.cn/docs/api/symlink#options" target="_blank" rel="noreferrer">Options</a> below.</td></tr></tbody></table><h3 id="返回值​-2" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-2" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/symlink#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>A stream that can be used in the middle or at the end of a pipeline to create symbolic links on the file system. Whenever a Vinyl object is passed through the stream, it creates a symbolic link to the original file on the file system at the given directory.</p><p>Whenever a symbolic link is created on the file system, the Vinyl object will be modified.</p><ul><li>The <code>cwd</code>, <code>base</code>, and <code>path</code> properties will be updated to match the created symbolic link.</li><li>The <code>stat</code> property will be updated to match the symbolic link on the file system.</li><li>The <code>contents</code> property will be set to <code>null</code>.</li><li>The <code>symlink</code> property will be added or replaced with original path.</li></ul><p><strong>Note:</strong>  On Windows, directory links are created using junctions by default. The <code>useJunctions</code> option disables this behavior.</p><h3 id="可能出现的错误​-2" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-2" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/symlink#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>When <code>directory</code> is an empty string, throws an error with the message, &quot;Invalid symlink() folder argument. Please specify a non-empty string or a function.&quot;</p><p>When <code>directory</code> is not a string or function, throws an error with the message, &quot;Invalid symlink() folder argument. Please specify a non-empty string or a function.&quot;</p><p>When <code>directory</code> is a function that returns an empty string or <code>undefined</code>, emits an error with the message, &quot;Invalid output folder&quot;.</p><h3 id="选项​-2" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/symlink#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​-2" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/symlink#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h3><p><strong>对于接受函数的选项，传递的函数将与每个 Vinyl 对象一起调用，并且必须返回另一个列出类型的值。</strong></p><table><thead><tr><th>name</th><th>type</th><th>default</th><th>note</th></tr></thead><tbody><tr><td>cwd</td><td>string function</td><td><code>process.cwd()</code></td><td>The directory that will be combined with any relative path to form an absolute path. Is ignored for absolute paths. Use to avoid combining <code>directory</code> with <code>path.join()</code>.</td></tr><tr><td>dirMode</td><td>number function</td><td></td><td>The mode used when creating directories. If not set, the process&#39; mode will be used.</td></tr><tr><td>overwrite</td><td>boolean function</td><td>true</td><td>When true, overwrites existing files with the same path.</td></tr><tr><td>relativeSymlinks</td><td>boolean function</td><td>false</td><td>When false, any symbolic links created will be absolute. <strong>Note</strong>: Ignored if a junction is being created, as they must be absolute.</td></tr><tr><td>useJunctions</td><td>boolean function</td><td>true</td><td>This option is only relevant on Windows and ignored elsewhere. When true, creates directory symbolic link as a junction. Detailed in <a href="https://www.gulpjs.com.cn/docs/api/symlink#symbolic-links-on-windows" target="_blank" rel="noreferrer">Symbolic links on Windows</a> below.</td></tr></tbody></table><h2 id="symbolic-links-on-windows​" tabindex="-1">Symbolic links on Windows<a href="https://www.gulpjs.com.cn/docs/api/symlink#symbolic-links-on-windows" title="Direct link to Symbolic links on Windows" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#symbolic-links-on-windows​" aria-label="Permalink to &quot;Symbolic links on Windows[​](https://www.gulpjs.com.cn/docs/api/symlink#symbolic-links-on-windows &quot;Direct link to Symbolic links on Windows&quot;)&quot;">​</a></h2><p>When creating symbolic links on Windows, a <code>type</code> argument is passed to Node&#39;s <code>fs.symlink()</code> method which specifies the type of target being linked. The link type is set to:</p><ul><li><code>&#39;file&#39;</code> when the target is a regular file</li><li><code>&#39;junction&#39;</code> when the target is a directory</li><li><code>&#39;dir&#39;</code> when the target is a directory and the user disables the <code>useJunctions</code> option</li></ul><p>If you try to create a dangling (pointing to a non-existent target) link, the link type can&#39;t be determined automatically. In these cases, behavior will vary depending on whether the dangling link is being created via <code>symlink()</code> or via <code>dest()</code>.</p><p>For dangling links created via <code>symlink()</code>, the incoming Vinyl object represents the target, so its stats will determine the desired link type. If <code>isDirectory()</code> returns false then a <code>&#39;file&#39;</code> link is created, otherwise a <code>&#39;junction&#39;</code> or <code>&#39;dir&#39;</code> link is created depending on the value of the <code>useJunctions</code> option.</p><p>For dangling links created via <code>dest()</code>, the incoming Vinyl object represents the link - typically loaded from disk via <code>src(..., { resolveSymlinks: false })</code>. In this case, the link type can&#39;t be reasonably determined and defaults to using <code>&#39;file&#39;</code>. This may cause unexpected behavior when creating a dangling link to a directory. <strong>Avoid this scenario.</strong></p><h1 id="lastrun" tabindex="-1">lastRun() <a class="header-anchor" href="#lastrun" aria-label="Permalink to &quot;lastRun()&quot;">​</a></h1><p>检索在当前运行进程中成功完成任务的最后一次时间。最有用的后续任务运行时，监视程序正在运行。当监视程序正在运行时，对于后续的任务运行最有用。</p><p>当与 <code>src()</code> 组合时，通过跳过自上次成功完成任务以来没有更 改的文件，使增量构建能够加快执行时间。</p><h2 id="用法​-3" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-3" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { src, dest, lastRun, watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const imagemin = require(&#39;gulp-imagemin&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function images() {</span></span>
<span class="line"><span style="color:#e1e4e8;">  return src(&#39;src/images/**/*.jpg&#39;, { since: lastRun(images) })</span></span>
<span class="line"><span style="color:#e1e4e8;">    .pipe(imagemin())</span></span>
<span class="line"><span style="color:#e1e4e8;">    .pipe(dest(&#39;build/img/&#39;));</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.default = function() {</span></span>
<span class="line"><span style="color:#e1e4e8;">  watch(&#39;src/images/**/*.jpg&#39;, images);</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { src, dest, lastRun, watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const imagemin = require(&#39;gulp-imagemin&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function images() {</span></span>
<span class="line"><span style="color:#000000;">  return src(&#39;src/images/**/*.jpg&#39;, { since: lastRun(images) })</span></span>
<span class="line"><span style="color:#000000;">    .pipe(imagemin())</span></span>
<span class="line"><span style="color:#000000;">    .pipe(dest(&#39;build/img/&#39;));</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.default = function() {</span></span>
<span class="line"><span style="color:#000000;">  watch(&#39;src/images/**/*.jpg&#39;, images);</span></span>
<span class="line"><span style="color:#000000;">};</span></span></code></pre></div><h2 id="函数原型​-3" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-3" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">lastRun(task, [precision])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">lastRun(task, [precision])</span></span></code></pre></div><h3 id="参数​-3" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-3" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>task <strong>(required)</strong></td><td>function string</td><td>已注册任务的任务函数或字符串别名。</td></tr><tr><td>precision</td><td>number</td><td>默认值： Node v0.10 版本中是 <code>1000</code>，在 Node v0.12+ 版本中是 <code>0</code> 。在下面的 <a href="https://www.gulpjs.com.cn/docs/api/lastrun#timestamp-precision" target="_blank" rel="noreferrer">时间戳精度</a> 章中有详细说明。</td></tr></tbody></table><h3 id="返回值​-3" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-3" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个时间戳（以毫秒为单位），表示任务的最后完成时间。如果任务尚未运行或已经失败，则返回 <code>undefined</code>。</p><p>为了避免缓存无效状态（invalid state），因此，如果任务出错，则返回值为 <code>undefined</code>。</p><h3 id="可能出现的错误​-3" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-3" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当传入的参数值不是字符串或函数时，会抛出一个错误，并显示错误信息 &quot;Only functions can check lastRun&quot;。</p><p>当对不可扩展的函进行数调或 Node 不支持 WeakMap 时，会抛出一个错误，并显示错误信息 &quot;Only extensible functions can check lastRun&quot;。</p><h2 id="时间戳精度​" tabindex="-1">时间戳精度<a href="https://www.gulpjs.com.cn/docs/api/lastrun#%E6%97%B6%E9%97%B4%E6%88%B3%E7%B2%BE%E5%BA%A6" title="Direct link to 时间戳精度" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#时间戳精度​" aria-label="Permalink to &quot;时间戳精度[​](https://www.gulpjs.com.cn/docs/api/lastrun#%E6%97%B6%E9%97%B4%E6%88%B3%E7%B2%BE%E5%BA%A6 &quot;Direct link to 时间戳精度&quot;)&quot;">​</a></h2><p>虽然时间戳的精度有合理的默认值，但仍然可以通过 <code>precision</code> 参数对其进行舍入。如果你所使用文件系统或 Node 版本对文件的时间属性精度不高的话，则很有用。</p><ul><li><code>lastRun(someTask)</code> 返回 1426000001111</li><li><code>lastRun(someTask, 100)</code> 返回 1426000001100</li><li><code>lastRun(someTask, 1000)</code> 返回 1426000001000</li></ul><p>文件的 <a href="https://www.gulpjs.com.cn/docs/api/concepts#file-system-stats" target="_blank" rel="noreferrer">mtime stat</a> 精度会由于 node 版本和/或所用的文件系统而出现误差。</p><table><thead><tr><th>平台</th><th>精度</th></tr></thead><tbody><tr><td>Node v0.10</td><td>1000ms</td></tr><tr><td>Node v0.12+</td><td>1ms</td></tr><tr><td>FAT32 file system</td><td>2000ms</td></tr><tr><td>HFS+ or Ext3 file systems</td><td>1000ms</td></tr><tr><td>NTFS using Node v0.10</td><td>1s</td></tr><tr><td>NTFS using Node 0.12+</td><td>100ms</td></tr><tr><td>Ext4 using Node v0.10</td><td>1000ms</td></tr><tr><td>Ext4 using Node 0.12+</td><td>1ms</td></tr></tbody></table><h1 id="series" tabindex="-1">series() <a class="header-anchor" href="#series" aria-label="Permalink to &quot;series()&quot;">​</a></h1><p>将任务函数和/或组合操作组合成更大的操作，这些操作将按顺序依次执行。对于使用 <code>series()</code> 和 <code>parallel()</code> 组合操作的嵌套深度没有强制限制。</p><h2 id="用法​-4" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/series#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-4" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/series#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { series } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function css(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = series(javascript, css);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { series } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function css(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = series(javascript, css);</span></span></code></pre></div><h2 id="函数原型​-4" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/series#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-4" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/series#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">series(...tasks)</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">series(...tasks)</span></span></code></pre></div><h3 id="参数​-4" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/series#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-4" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/series#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>tasks <strong>(required)</strong></td><td>function string</td><td>任意数量的任务函数都可以作为单独的参数传递。如果您以前注册过任务，可以使用字符串，但不建议这样做。</td></tr></tbody></table><h3 id="返回值​-4" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/series#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-4" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/series#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个组合操作，它将注册为任务或嵌套在其他 <code>series</code> 和/或 <code>parallel</code> 组合中。</p><p>当执行组合操作时，所有任务将按顺序运行。如果一个任务中发生错误，则不会运行后续任务。</p><h3 id="可能出现的错误​-4" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/series#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-4" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/series#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当没有传递任何任务时，抛出一个错误，并提示 &quot;One or more tasks should be combined using series or parallel&quot;。（一个或多个应该使用 series 或 parallel 组合的任务”。）</p><p>当传递无效的任务或未注册的任务时，将抛出一个错误，显示 &quot;Task never defined&quot;（任务从未定义）。</p><h2 id="向前引用-forward-references-​" tabindex="-1">向前引用（Forward references）<a href="https://www.gulpjs.com.cn/docs/api/series#%E5%90%91%E5%89%8D%E5%BC%95%E7%94%A8forward-references" title="Direct link to 向前引用（Forward references）" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#向前引用-forward-references-​" aria-label="Permalink to &quot;向前引用（Forward references）[​](https://www.gulpjs.com.cn/docs/api/series#%E5%90%91%E5%89%8D%E5%BC%95%E7%94%A8forward-references &quot;Direct link to 向前引用（Forward references）&quot;)&quot;">​</a></h2><p>向前引用是指使用尚未注册的字符串引用组合任务。在旧版本中，这是一种常见的实践，但是为了实现更快的任务运行时间和促进使用命名函数，删除了该特性。</p><p>在较新的版本中，如果尝试使用向前引用，将会得到一个错误，消息为 “Task never defined”。当您尝试为您的任务注册<em>和</em>按字符串组合任务使用 <code>exports</code> 时，可能会遇到这种情况。在这种情况下，使用命名函数而不是字符串引用。</p><p>在迁移期间，您可能需要使用 <a href="https://github.com/gulpjs/undertaker-forward-reference" target="_blank" rel="noreferrer">forward reference registry</a>。这将为每个任务引用添加一个额外的闭包，并显著降低构建速度。<strong>不要太长时间依赖这个修复程序</strong>。</p><h2 id="避免重复任务​" tabindex="-1">避免重复任务<a href="https://www.gulpjs.com.cn/docs/api/series#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E4%BB%BB%E5%8A%A1" title="Direct link to 避免重复任务" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#避免重复任务​" aria-label="Permalink to &quot;避免重复任务[​](https://www.gulpjs.com.cn/docs/api/series#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E4%BB%BB%E5%8A%A1 &quot;Direct link to 避免重复任务&quot;)&quot;">​</a></h2><p>当运行组合操作时，每个任务将在每次提供时执行。</p><p>在两个不同的组合中引用的 <code>clean</code> 任务将运行两次，将导致不期望的结果。因此，建议在最终组合中指定 <code>clean</code> 任务。</p><p>If you have code like this:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">// This is INCORRECT</span></span>
<span class="line"><span style="color:#e1e4e8;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const css = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const javascript = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = parallel(css, javascript);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">// This is INCORRECT</span></span>
<span class="line"><span style="color:#000000;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">};</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const css = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const javascript = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = parallel(css, javascript);</span></span></code></pre></div><p>可转换为：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function clean(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function css(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = series(clean, parallel(css, javascript));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function clean(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function css(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = series(clean, parallel(css, javascript));</span></span></code></pre></div><h1 id="parallel" tabindex="-1">parallel() <a class="header-anchor" href="#parallel" aria-label="Permalink to &quot;parallel()&quot;">​</a></h1><p>将任务功能和/或组合操作组合成同时执行的较大操作。对于使用 <code>series()</code> 和 <code>parallel()</code> 进行嵌套组合的深度没有强制限制。</p><h2 id="用法​-5" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-5" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/parallel#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function css(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = parallel(javascript, css);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function css(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = parallel(javascript, css);</span></span></code></pre></div><h2 id="函数原型​-5" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-5" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/parallel#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">parallel(...tasks)</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">parallel(...tasks)</span></span></code></pre></div><h3 id="参数​-5" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-5" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/parallel#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>注解</th></tr></thead><tbody><tr><td>tasks <strong>(required)</strong></td><td>function string</td><td>任意数量的任务函数都可以作为单独的参数传递。如果您以前注册过任务，可以使用字符串，但不建议这样做。</td></tr></tbody></table><h3 id="返回值​-5" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-5" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/parallel#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个组合操作，它将注册为任务或嵌套在其他 <code>series</code> 和/或 <code>parallel</code> 组合中。</p><p>当执行组合操作时，所有任务将以最大并发性运行。如果一个任务发生错误，其他任务可能不确定地完成，也可能不完成。</p><h3 id="可能出现的错误​-5" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-5" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/parallel#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当没有传递任何任务时，抛出一个错误，并提示 &quot;One or more tasks should be combined using series or parallel&quot;。（一个或多个应该使用 series 或 parallel 组合的任务”。）</p><p>当传递无效的任务或未注册的任务时，将抛出一个错误，显示 &quot;Task never defined&quot;（任务从未定义）。</p><h2 id="向前引用-forward-references-​-1" tabindex="-1">向前引用（Forward references）<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E5%90%91%E5%89%8D%E5%BC%95%E7%94%A8forward-references" title="Direct link to 向前引用（Forward references）" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#向前引用-forward-references-​-1" aria-label="Permalink to &quot;向前引用（Forward references）[​](https://www.gulpjs.com.cn/docs/api/parallel#%E5%90%91%E5%89%8D%E5%BC%95%E7%94%A8forward-references &quot;Direct link to 向前引用（Forward references）&quot;)&quot;">​</a></h2><p>向前引用是指使用尚未注册的字符串引用组合任务。在旧版本中，这是一种常见的实践，但是为了实现更快的任务运行时间和促进使用命名函数，删除了该特性。</p><p>在较新的版本中，如果尝试使用向前引用，将会得到一个错误，消息为 “Task never defined”。当您尝试为您的任务注册<em>和</em>按字符串组合任务使用 <code>exports</code> 时，可能会遇到这种情况。在这种情况下，使用命名函数而不是字符串引用。</p><p>在迁移期间，您可能需要使用 <a href="https://github.com/gulpjs/undertaker-forward-reference" target="_blank" rel="noreferrer">forward reference registry</a>。这将为每个任务引用添加一个额外的闭包，并显著降低构建速度。<strong>不要太长时间依赖这个修复程序</strong>。</p><h2 id="避免重复任务​-1" tabindex="-1">避免重复任务<a href="https://www.gulpjs.com.cn/docs/api/parallel#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E4%BB%BB%E5%8A%A1" title="Direct link to 避免重复任务" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#避免重复任务​-1" aria-label="Permalink to &quot;避免重复任务[​](https://www.gulpjs.com.cn/docs/api/parallel#%E9%81%BF%E5%85%8D%E9%87%8D%E5%A4%8D%E4%BB%BB%E5%8A%A1 &quot;Direct link to 避免重复任务&quot;)&quot;">​</a></h2><p>当一个组合操作执行时，每个任务（task）的每次调用都将被执行。</p><p>在两个不同的组合中引用的 <code>clean</code> 任务将运行两次，将导致不期望的结果。因此，建议在最终的组合中指定 <code>clean</code> 任务。</p><p>如果你有如下代码：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">// This is INCORRECT</span></span>
<span class="line"><span style="color:#e1e4e8;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const css = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const javascript = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = parallel(css, javascript);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">// This is INCORRECT</span></span>
<span class="line"><span style="color:#000000;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">};</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const css = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const javascript = series(clean, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = parallel(css, javascript);</span></span></code></pre></div><p>可转换为：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function clean(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function css(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">exports.build = series(clean, parallel(css, javascript));</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function clean(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function css(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function javascript(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">exports.build = series(clean, parallel(css, javascript));</span></span></code></pre></div><h1 id="watch" tabindex="-1">watch() <a class="header-anchor" href="#watch" aria-label="Permalink to &quot;watch()&quot;">​</a></h1><p>监听 globs 并在发生更改时运行任务。任务与任务系统的其余部分被统一处理。</p><h2 id="用法​-6" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/watch#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-6" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/watch#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">watch([&#39;input/*.js&#39;, &#39;!input/something.js&#39;], function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">watch([&#39;input/*.js&#39;, &#39;!input/something.js&#39;], function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span></code></pre></div><h2 id="函数原型​-6" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/watch#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-6" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/watch#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">watch(globs, [options], [task])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">watch(globs, [options], [task])</span></span></code></pre></div><h3 id="参数​-6" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/watch#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-6" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/watch#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>globs <strong>(required)</strong></td><td>string array</td><td>监听文件系统中匹配 <a href="https://www.gulpjs.com.cn/docs/api/concepts#globs" target="_blank" rel="noreferrer">Globs</a> 的文件。</td></tr><tr><td>options</td><td>object</td><td>详情参见下文 <a href="https://www.gulpjs.com.cn/docs/api/watch#options" target="_blank" rel="noreferrer">选项</a> 。</td></tr><tr><td>task</td><td>function string</td><td>一个 <a href="https://www.gulpjs.com.cn/docs/api/concepts#tasks" target="_blank" rel="noreferrer">任务函数</a> 或由 <code>series()</code> 和 <code>parallel()</code> 生成的组合任务。</td></tr></tbody></table><h3 id="返回值​-6" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/watch#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-6" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/watch#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p><a href="https://www.gulpjs.com.cn/docs/api/watch#chokidar-instance" target="_blank" rel="noreferrer">chokidar</a> 的一个实例，用于对监听设置进行细粒度控制。</p><h3 id="可能出现的错误​-6" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/watch#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-6" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/watch#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当以 <code>globs</code> 形式传递非字符串或带有任何非字符串的数组时，将抛出一个错误，并提示 &quot;Non-string provided as watch path&quot;。</p><p>当字符串或数组作为 <code>task</code> 传递时，会抛出一个错误，提示 &quot;watch task has to be a function (optionally generated by using gulp.parallel or gulp.series)&quot;（ watch 任务必须是一个函数(可以选择使用 gulp.parallel 或 gulp.series 生成))。</p><h3 id="选项​-3" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/watch#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​-3" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/watch#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h3><table><thead><tr><th>名称</th><th>类型</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>ignoreInitial</td><td>boolean</td><td>true</td><td>false，则在实例化过程中调用该任务，以发现文件路径。用于在启动期间触发任务。 <strong>注意:</strong>  这个选项被传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>，但默认为 <code>true</code> 而不是 <code>false</code>。</td></tr><tr><td>delay</td><td>number</td><td>200</td><td>文件更改和任务执行之间的毫秒延迟。允许在执行任务之前等待许多更改，例如查找和替换许多文件。</td></tr><tr><td>queue</td><td>boolean</td><td>true</td><td>当为 true 且任务已经运行时，任何文件更改都将对单个任务执行进行排队。避免长时间运行的任务重叠。</td></tr><tr><td>events</td><td>string array</td><td>[ &#39;add&#39;, &#39;change&#39;, &#39;unlink&#39; ]</td><td>正在监听的事件，以触发任务执行。可以是 <code>&#39;add&#39;</code>、<code>&#39;addDir&#39;</code>、<code>&#39;change&#39;</code>、<code>&#39;unlink&#39;</code>、<code>&#39;unlinkDir&#39;</code>, <code>&#39;ready&#39;</code>、和/或 <code>&#39;error&#39;</code>。 另外 <code>&#39;all&#39;</code> 也是可用的，它表示除 <code>&#39;ready&#39;</code> 和 <code>&#39;error&#39;</code> 之外的所有事件。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>persistent</td><td>boolean</td><td>true</td><td>如果为 false，监听器将不会保持 Node 进程的运行。不建议禁用此选项。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>ignored</td><td>array string RegExp function</td><td></td><td>Defines globs to be ignored. If a function is provided, it will be called twice per path - once with just the path, then with the path and the <code>fs.Stats</code> object of that file. <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>followSymlinks</td><td>boolean</td><td>true</td><td>如果为 true，对符号链接和链接的文件的更改都将触发事件。如果为 false，则只有对符号链接的更改才触发事件。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>cwd</td><td>string</td><td></td><td>将与任何相对路径相结合以形成绝对路径的目录。对于绝对路径忽略。用于避免将 <code>globs</code> 与 <code>path.join()</code> 组合使用。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>disableGlobbing</td><td>boolean</td><td>false</td><td>如果为 true，所有 <code>globs</code> 都被视为字面路径名称，即使它们具有特殊字符。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>usePolling</td><td>boolean</td><td>false</td><td>当为 false 时，监听器将使用 <code>fs.watch()</code>（或 Mac 上的 <a href="https://github.com/strongloop/fsevents" target="_blank" rel="noreferrer">fsevents</a>）(或<a href="https://github.com/strongloop/fsevents" target="_blank" rel="noreferrer">fsevents</a>)进行监听。如果为 true，则使用 <code>fs.watchFile()</code> 轮询代替——这是通过网络或其他非标准情况成功监听文件所必需的。覆盖 <code>useFsEvents</code> 默认值。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>interval</td><td>number</td><td>100</td><td>与 <code>usePolling: true</code> 配套使用。表示文件系统轮询的间隔。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>binaryInterval</td><td>number</td><td>300</td><td>与 <code>usePolling: true</code> 配套使用。表示文件系统轮询二进制文件的间隔。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>useFsEvents</td><td>boolean</td><td>true</td><td>如果为 true 且 fsevents 可用， 则使用 fsevents 进行监听。如果显式设置为 true，则替代 <code>usePolling</code> 选项。如果设置为 false，则自动将 <code>usePolling</code> 设置为 true。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>alwaysStat</td><td>boolean</td><td>false</td><td>如果为 true，总是调用 <code>fs.stat()</code> 对已更改的文件——将减慢文件监听器。只有在直接使用chokidar 实例时，<code>fs.Stat</code> 的对象才可用。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>depth</td><td>number</td><td></td><td>指示将监听多少级嵌套目录。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>awaitWriteFinish</td><td>boolean</td><td>false</td><td>不要使用这个选项，而是使用 <code>delay</code>。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>ignorePermissionErrors</td><td>boolean</td><td>false</td><td>设置为 true 以监听没有读取权限的文件。然而，如果由于 EPERM 或 EACCES 错误导致监听失败，则会自动跳过。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr><tr><td>atomic</td><td>number</td><td>100</td><td>只有在 <code>useFsEvents</code> 和 <code>usePolling</code> 为 false 时才激活。自动过滤掉一些编辑器从 &quot;atomic writes&quot; 中产生的工件。如果文件在删除后的指定毫秒内重新添加，则会发出一个更改事件(而不是取消链接然后添加)。 <em>此选项被直接传递给 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a>.</em></td></tr></tbody></table><h2 id="chokidar-实例​" tabindex="-1">Chokidar 实例<a href="https://www.gulpjs.com.cn/docs/api/watch#chokidar-%E5%AE%9E%E4%BE%8B" title="Direct link to Chokidar 实例" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#chokidar-实例​" aria-label="Permalink to &quot;Chokidar 实例[​](https://www.gulpjs.com.cn/docs/api/watch#chokidar-%E5%AE%9E%E4%BE%8B &quot;Direct link to Chokidar 实例&quot;)&quot;">​</a></h2><p><code>watch()</code> 方法返回 <a href="https://github.com/paulmillr/chokidar" target="_blank" rel="noreferrer">chokidar</a> 的底层实例，提供对监听设置的细粒度控制。最常用来注册提供更改文件的 <code>path</code> 或 <code>stats</code> 的单个事件处理程序。</p><p><strong>当直接使用 chokidar 实例时，您将无法访问任务系统集成，包括异步完成、队列和延迟</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const watcher = watch([&#39;input/*.js&#39;]);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">watcher.on(&#39;change&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  console.log(`File ${path} was changed`);</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">watcher.on(&#39;add&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  console.log(`File ${path} was added`);</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">watcher.on(&#39;unlink&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  console.log(`File ${path} was removed`);</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">watcher.close();</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { watch } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const watcher = watch([&#39;input/*.js&#39;]);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">watcher.on(&#39;change&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#000000;">  console.log(`File ${path} was changed`);</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">watcher.on(&#39;add&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#000000;">  console.log(`File ${path} was added`);</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">watcher.on(&#39;unlink&#39;, function(path, stats) {</span></span>
<span class="line"><span style="color:#000000;">  console.log(`File ${path} was removed`);</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">watcher.close();</span></span></code></pre></div><p><code>watcher.on(eventName, eventHandler)</code></p><p>注册 <code>eventHandler</code> 函数，当指定的事件发生时调用该函数。</p><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>eventName</td><td>string</td><td>可以观察到的事件有 <code>&#39;add&#39;</code>、<code>&#39;addDir&#39;</code>、<code>&#39;change&#39;</code>、<code>&#39;unlink&#39;</code>、<code>&#39;unlinkDir&#39;</code>、<code>&#39;ready&#39;</code>、<code>&#39;error&#39;</code>、 或 <code>&#39;all&#39;</code>.</td></tr><tr><td>eventHandler</td><td>function</td><td>当指定的事件发生时调用的函数。参数详见下表。</td></tr></tbody></table><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>path</td><td>string</td><td>已更改的文件的路径。如果设置了 <code>cwd</code> 选项，则是通过删除 <code>cwd</code> 的相对路径。</td></tr><tr><td>stats</td><td>object</td><td>一个 <a href="https://www.gulpjs.com.cn/docs/api/concepts#file-system-stats" target="_blank" rel="noreferrer">fs.Stat</a> 对象，但可以是 <code>undefined</code>。如果 <code>alwaysStat</code> 选项被设置为 <code>true</code>，<code>stats</code> 将始终被提供。</td></tr></tbody></table><p><code>watcher.close()</code></p><p>关闭文件监听器。一旦关闭，就不会再发出任何事件。</p><p><code>watcher.add(globs)</code></p><p>向已经运行的监听器实例添加额外的 globs。</p><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>globs</td><td>string array</td><td>额外需要监听的 glob。</td></tr></tbody></table><p><code>watcher.unwatch(globs)</code></p><p>删除正在被监听的 globs，而监视程序继续使用剩余的路径。</p><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>globs</td><td>string array</td><td>要删除的 glob。</td></tr></tbody></table><h1 id="task" tabindex="-1">task() <a class="header-anchor" href="#task" aria-label="Permalink to &quot;task()&quot;">​</a></h1><p><strong>提醒</strong>: 这个API不再是推荐的模式了 - <a href="https://www.gulpjs.com.cn/docs/getting-started/creating-tasks" target="_blank" rel="noreferrer">export your tasks</a>。因此就不翻译了！</p><p>在任务系统中定义任务。然后可以从命令行和 <code>series()</code>、<code>parallel()</code> 和 <code>lastRun()</code> api 访问该任务。</p><h2 id="usage​" tabindex="-1">Usage<a href="https://www.gulpjs.com.cn/docs/api/task#usage" title="Direct link to Usage" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#usage​" aria-label="Permalink to &quot;Usage[​](https://www.gulpjs.com.cn/docs/api/task#usage &quot;Direct link to Usage&quot;)&quot;">​</a></h2><p>Register a named function as a task:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function build(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(build);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function build(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(build);</span></span></code></pre></div><p>Register an anonymous function as a task:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(&#39;build&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(&#39;build&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span></code></pre></div><p>Retrieve a task that has been registered previously:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(&#39;build&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const build = task(&#39;build&#39;);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(&#39;build&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const build = task(&#39;build&#39;);</span></span></code></pre></div><h2 id="signature​" tabindex="-1">Signature<a href="https://www.gulpjs.com.cn/docs/api/task#signature" title="Direct link to Signature" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#signature​" aria-label="Permalink to &quot;Signature[​](https://www.gulpjs.com.cn/docs/api/task#signature &quot;Direct link to Signature&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">task([taskName], taskFunction)</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">task([taskName], taskFunction)</span></span></code></pre></div><h3 id="parameters​" tabindex="-1">Parameters<a href="https://www.gulpjs.com.cn/docs/api/task#parameters" title="Direct link to Parameters" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#parameters​" aria-label="Permalink to &quot;Parameters[​](https://www.gulpjs.com.cn/docs/api/task#parameters &quot;Direct link to Parameters&quot;)&quot;">​</a></h3><p>If the <code>taskName</code> is not provided, the task will be referenced by the <code>name</code> property of a named function or a user-defined <code>displayName</code> property. The <code>taskName</code> parameter must be used for anonymous functions missing a <code>displayName</code> property.</p><p>Since any registered task can be run from the command line, avoid using spaces in task names.</p><table><thead><tr><th>parameter</th><th>type</th><th>note</th></tr></thead><tbody><tr><td>taskName</td><td>string</td><td>An alias for the task function within the task system. Not needed when using named functions for <code>taskFunction</code>.</td></tr><tr><td>taskFunction <strong>(required)</strong></td><td>function</td><td>A <a href="https://www.gulpjs.com.cn/docs/api/concepts#tasks" target="_blank" rel="noreferrer">task function</a> or composed task - generated by <code>series()</code> and <code>parallel()</code>. Ideally a named function. <a href="https://www.gulpjs.com.cn/docs/api/task#task-metadata" target="_blank" rel="noreferrer">Task metadata</a> can be attached to provide extra information to the command line.</td></tr></tbody></table><h3 id="returns​" tabindex="-1">Returns<a href="https://www.gulpjs.com.cn/docs/api/task#returns" title="Direct link to Returns" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#returns​" aria-label="Permalink to &quot;Returns[​](https://www.gulpjs.com.cn/docs/api/task#returns &quot;Direct link to Returns&quot;)&quot;">​</a></h3><p>When registering a task, nothing is returned.</p><p>When retrieving a task, a wrapped task (not the original function) registered as <code>taskName</code> will be returned. The wrapped task has an <code>unwrap()</code> method that will return the original function.</p><h3 id="errors​" tabindex="-1">Errors<a href="https://www.gulpjs.com.cn/docs/api/task#errors" title="Direct link to Errors" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#errors​" aria-label="Permalink to &quot;Errors[​](https://www.gulpjs.com.cn/docs/api/task#errors &quot;Direct link to Errors&quot;)&quot;">​</a></h3><p>When registering a task where <code>taskName</code> is missing and <code>taskFunction</code> is anonymous, will throw an error with the message, &quot;Task name must be specified&quot;.</p><h2 id="task-metadata​" tabindex="-1">Task metadata<a href="https://www.gulpjs.com.cn/docs/api/task#task-metadata" title="Direct link to Task metadata" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#task-metadata​" aria-label="Permalink to &quot;Task metadata[​](https://www.gulpjs.com.cn/docs/api/task#task-metadata &quot;Direct link to Task metadata&quot;)&quot;">​</a></h2><table><thead><tr><th>property</th><th>type</th><th>note</th></tr></thead><tbody><tr><td>name</td><td>string</td><td>A special property of named functions. Used to register the task. <strong>Note:</strong>  <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name" target="_blank" rel="noreferrer"><code>name</code></a> is not writable; it cannot be set or changed.</td></tr><tr><td>displayName</td><td>string</td><td>When attached to a <code>taskFunction</code> creates an alias for the task. If using characters that aren&#39;t allowed in function names, use this property.</td></tr><tr><td>description</td><td>string</td><td>When attached to a <code>taskFunction</code> provides a description to be printed by the command line when listing tasks.</td></tr><tr><td>flags</td><td>object</td><td>When attached to a <code>taskFunction</code> provides flags to be printed by the command line when listing tasks. The keys of the object represent the flags and the values are their descriptions.</td></tr></tbody></table><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">};</span></span>
<span class="line"><span style="color:#e1e4e8;">clean.displayName = &#39;clean:all&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(clean);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function build(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;">build.description = &#39;Build the project&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">build.flags = { &#39;-e&#39;: &#39;An example flag&#39; };</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(build);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { task } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const clean = function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">};</span></span>
<span class="line"><span style="color:#000000;">clean.displayName = &#39;clean:all&#39;;</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(clean);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function build(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;">build.description = &#39;Build the project&#39;;</span></span>
<span class="line"><span style="color:#000000;">build.flags = { &#39;-e&#39;: &#39;An example flag&#39; };</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(build);</span></span></code></pre></div><h1 id="registry" tabindex="-1">registry() <a class="header-anchor" href="#registry" aria-label="Permalink to &quot;registry()&quot;">​</a></h1><p>允许将自定义的注册表插入到任务系统中，以便提供共享任务或增强功能。</p><p><strong>注意：</strong>  只有用 <code>task()</code> 方法注册的任务才会进入自定义注册表中。直接传递给 <code>series()</code> 或 <code>parallel()</code> 的任务函数（task functions）不会进入自定义任务注册表 - 如果你需要自定义注册表的行为，请通过字符串引用的方式将任务（task）组合在一起。</p><p>分配新注册表时，将传输当前注册表中的每个任务，并将用新注册表替换当前注册表。这允许按顺序添加多个自定义注册表。</p><p>有关详细信息，请参考 <a href="https://www.gulpjs.com.cn/docs/advanced/creating-custom-registries" target="_blank" rel="noreferrer">创建自定义注册表</a> 。</p><h2 id="用法​-7" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/registry#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-7" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/registry#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const { registry, task, series } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;">const FwdRef = require(&#39;undertaker-forward-reference&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">registry(FwdRef());</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(&#39;default&#39;, series(&#39;forward-ref&#39;));</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">task(&#39;forward-ref&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const { registry, task, series } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;">const FwdRef = require(&#39;undertaker-forward-reference&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">registry(FwdRef());</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(&#39;default&#39;, series(&#39;forward-ref&#39;));</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">task(&#39;forward-ref&#39;, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">});</span></span></code></pre></div><h2 id="函数原型​-7" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/registry#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-7" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/registry#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">registry([registryInstance])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">registry([registryInstance])</span></span></code></pre></div><h3 id="参数​-7" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-7" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>注解</th></tr></thead><tbody><tr><td>registryInstance</td><td>object</td><td>自定义注册表的实例(而不是类)。</td></tr></tbody></table><h3 id="返回值​-7" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/registry#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-7" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/registry#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>如果传递了 <code>registryInstance</code>，则不会返回任何内容。如果没有传递参数，则返回当前注册表实例。</p><h3 id="可能出现的错误​-7" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-7" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><h4 id="参数错误​" tabindex="-1">参数错误<a href="https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%82%E6%95%B0%E9%94%99%E8%AF%AF" title="Direct link to 参数错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数错误​" aria-label="Permalink to &quot;参数错误[​](https://www.gulpjs.com.cn/docs/api/registry#%E5%8F%82%E6%95%B0%E9%94%99%E8%AF%AF &quot;Direct link to 参数错误&quot;)&quot;">​</a></h4><p>当构造函数（而不是实例）作为 <code>registryInstance</code> 传递时，将抛出一个错误（error），并且提示信息如下：</p><blockquote><p>Custom registries must be instantiated, but it looks like you passed a constructor.（自定义注册表必须实例化，但看起来你传递的是一个构造函数啊，亲！）</p></blockquote><h4 id="缺少-get-方法​" tabindex="-1">缺少 <code>get</code> 方法<a href="https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-get-%E6%96%B9%E6%B3%95" title="Direct link to 缺少-get-方法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#缺少-get-方法​" aria-label="Permalink to &quot;缺少 `get` 方法[​](https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-get-%E6%96%B9%E6%B3%95 &quot;Direct link to 缺少-get-方法&quot;)&quot;">​</a></h4><p>当一个没有 <code>get</code> 方法的注册表作为 <code>registryInstance</code> 传递时，将抛出一个错误（error），并且提示信息如下：</p><blockquote><p>Custom registry must have <code>get</code> function.（自定义注册表必须具备 <code>get</code> 函数。）</p></blockquote><h4 id="缺少-set-方法​" tabindex="-1">缺少 <code>set</code> 方法<a href="https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-set-%E6%96%B9%E6%B3%95" title="Direct link to 缺少-set-方法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#缺少-set-方法​" aria-label="Permalink to &quot;缺少 `set` 方法[​](https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-set-%E6%96%B9%E6%B3%95 &quot;Direct link to 缺少-set-方法&quot;)&quot;">​</a></h4><p>当一个没有 <code>set</code> 方法的注册表作为 <code>registryInstance</code> 传递时，将抛出一个错误（error），并且提示信息如下：</p><blockquote><p>Custom registry must have <code>set</code> function.（自定义注册表必须具有 <code>set</code> 函数。）</p></blockquote><h4 id="缺少-init-方法​" tabindex="-1">缺少 <code>init</code> 方法<a href="https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-init-%E6%96%B9%E6%B3%95" title="Direct link to 缺少-init-方法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#缺少-init-方法​" aria-label="Permalink to &quot;缺少 `init` 方法[​](https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-init-%E6%96%B9%E6%B3%95 &quot;Direct link to 缺少-init-方法&quot;)&quot;">​</a></h4><p>当一个没有 <code>init</code> 方法的注册表作为 <code>registryInstance</code> 传递时，将抛出一个错误（error），并且提示信息如下：</p><blockquote><p>Custom registry must have <code>init</code> function&quot;（自定义注册表必须具有 <code>init</code> 函数。）</p></blockquote><h4 id="缺少-tasks-方法​" tabindex="-1">缺少 <code>tasks</code> 方法<a href="https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-tasks-%E6%96%B9%E6%B3%95" title="Direct link to 缺少-tasks-方法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#缺少-tasks-方法​" aria-label="Permalink to &quot;缺少 `tasks` 方法[​](https://www.gulpjs.com.cn/docs/api/registry#%E7%BC%BA%E5%B0%91-tasks-%E6%96%B9%E6%B3%95 &quot;Direct link to 缺少-tasks-方法&quot;)&quot;">​</a></h4><p>当一个没有 <code>tasks</code> 方法的注册表作为 <code>registryInstance</code> 传递时，将抛出一个错误（error），并且提示信息如下：</p><blockquote><p>Custom registry must have <code>tasks</code> function.（自定义注册表必须具有 <code>tasks</code> 函数。）</p></blockquote><h1 id="tree" tabindex="-1">tree() <a class="header-anchor" href="#tree" aria-label="Permalink to &quot;tree()&quot;">​</a></h1><p>获取当前任务依赖关系树——在极少数情况下需要它。</p><p>通常，gulp 使用者不会使用 <code>tree()</code>，但它是公开的，因此 CLI 可以显示在 gulpfile 中定义的任务的依赖关系图。</p><h2 id="用法​-8" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/tree#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-8" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/tree#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><p>Example gulpfile:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function one(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function two(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">function three(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">  // body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">  cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const four = series(one, two);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const five = series(four,</span></span>
<span class="line"><span style="color:#e1e4e8;">  parallel(three, function(cb) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    // Body omitted</span></span>
<span class="line"><span style="color:#e1e4e8;">    cb();</span></span>
<span class="line"><span style="color:#e1e4e8;">  })</span></span>
<span class="line"><span style="color:#e1e4e8;">);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">module.exports = { one, two, three, four, five };</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const { series, parallel } = require(&#39;gulp&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function one(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function two(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">function three(cb) {</span></span>
<span class="line"><span style="color:#000000;">  // body omitted</span></span>
<span class="line"><span style="color:#000000;">  cb();</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const four = series(one, two);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const five = series(four,</span></span>
<span class="line"><span style="color:#000000;">  parallel(three, function(cb) {</span></span>
<span class="line"><span style="color:#000000;">    // Body omitted</span></span>
<span class="line"><span style="color:#000000;">    cb();</span></span>
<span class="line"><span style="color:#000000;">  })</span></span>
<span class="line"><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">module.exports = { one, two, three, four, five };</span></span></code></pre></div><p><code>tree()</code> 的输出:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  label: &#39;Tasks&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  nodes: [ &#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39; ]</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">{</span></span>
<span class="line"><span style="color:#000000;">  label: &#39;Tasks&#39;,</span></span>
<span class="line"><span style="color:#000000;">  nodes: [ &#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39; ]</span></span>
<span class="line"><span style="color:#000000;">}</span></span></code></pre></div><p><code>tree({ deep: true })</code> 的输出:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">{</span></span>
<span class="line"><span style="color:#e1e4e8;">  label: &quot;Tasks&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      label: &quot;three&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      label: &quot;four&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">        {</span></span>
<span class="line"><span style="color:#e1e4e8;">          label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">          type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">          branch: true,</span></span>
<span class="line"><span style="color:#e1e4e8;">          nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">            {</span></span>
<span class="line"><span style="color:#e1e4e8;">              label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">            },</span></span>
<span class="line"><span style="color:#e1e4e8;">            {</span></span>
<span class="line"><span style="color:#e1e4e8;">              label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">            }</span></span>
<span class="line"><span style="color:#e1e4e8;">          ]</span></span>
<span class="line"><span style="color:#e1e4e8;">        }</span></span>
<span class="line"><span style="color:#e1e4e8;">      ]</span></span>
<span class="line"><span style="color:#e1e4e8;">    },</span></span>
<span class="line"><span style="color:#e1e4e8;">    {</span></span>
<span class="line"><span style="color:#e1e4e8;">      label: &quot;five&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">      nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">        {</span></span>
<span class="line"><span style="color:#e1e4e8;">          label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">          type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">          branch: true,</span></span>
<span class="line"><span style="color:#e1e4e8;">          nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">            {</span></span>
<span class="line"><span style="color:#e1e4e8;">              label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              branch: true,</span></span>
<span class="line"><span style="color:#e1e4e8;">              nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">                {</span></span>
<span class="line"><span style="color:#e1e4e8;">                  label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">                },</span></span>
<span class="line"><span style="color:#e1e4e8;">                {</span></span>
<span class="line"><span style="color:#e1e4e8;">                  label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">                }</span></span>
<span class="line"><span style="color:#e1e4e8;">              ]</span></span>
<span class="line"><span style="color:#e1e4e8;">            },</span></span>
<span class="line"><span style="color:#e1e4e8;">            {</span></span>
<span class="line"><span style="color:#e1e4e8;">              label: &quot;&lt;parallel&gt;&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">              branch: true,</span></span>
<span class="line"><span style="color:#e1e4e8;">              nodes: [</span></span>
<span class="line"><span style="color:#e1e4e8;">                {</span></span>
<span class="line"><span style="color:#e1e4e8;">                  label: &quot;three&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">                },</span></span>
<span class="line"><span style="color:#e1e4e8;">                {</span></span>
<span class="line"><span style="color:#e1e4e8;">                  label: &quot;&lt;anonymous&gt;&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#e1e4e8;">                  nodes: []</span></span>
<span class="line"><span style="color:#e1e4e8;">                }</span></span>
<span class="line"><span style="color:#e1e4e8;">              ]</span></span>
<span class="line"><span style="color:#e1e4e8;">            }</span></span>
<span class="line"><span style="color:#e1e4e8;">          ]</span></span>
<span class="line"><span style="color:#e1e4e8;">        }</span></span>
<span class="line"><span style="color:#e1e4e8;">      ]</span></span>
<span class="line"><span style="color:#e1e4e8;">    }</span></span>
<span class="line"><span style="color:#e1e4e8;">  ]</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">{</span></span>
<span class="line"><span style="color:#000000;">  label: &quot;Tasks&quot;,</span></span>
<span class="line"><span style="color:#000000;">  nodes: [</span></span>
<span class="line"><span style="color:#000000;">    {</span></span>
<span class="line"><span style="color:#000000;">      label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#000000;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#000000;">      nodes: []</span></span>
<span class="line"><span style="color:#000000;">    },</span></span>
<span class="line"><span style="color:#000000;">    {</span></span>
<span class="line"><span style="color:#000000;">      label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#000000;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#000000;">      nodes: []</span></span>
<span class="line"><span style="color:#000000;">    },</span></span>
<span class="line"><span style="color:#000000;">    {</span></span>
<span class="line"><span style="color:#000000;">      label: &quot;three&quot;,</span></span>
<span class="line"><span style="color:#000000;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#000000;">      nodes: []</span></span>
<span class="line"><span style="color:#000000;">    },</span></span>
<span class="line"><span style="color:#000000;">    {</span></span>
<span class="line"><span style="color:#000000;">      label: &quot;four&quot;,</span></span>
<span class="line"><span style="color:#000000;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#000000;">      nodes: [</span></span>
<span class="line"><span style="color:#000000;">        {</span></span>
<span class="line"><span style="color:#000000;">          label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#000000;">          type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">          branch: true,</span></span>
<span class="line"><span style="color:#000000;">          nodes: [</span></span>
<span class="line"><span style="color:#000000;">            {</span></span>
<span class="line"><span style="color:#000000;">              label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#000000;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">              nodes: []</span></span>
<span class="line"><span style="color:#000000;">            },</span></span>
<span class="line"><span style="color:#000000;">            {</span></span>
<span class="line"><span style="color:#000000;">              label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#000000;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">              nodes: []</span></span>
<span class="line"><span style="color:#000000;">            }</span></span>
<span class="line"><span style="color:#000000;">          ]</span></span>
<span class="line"><span style="color:#000000;">        }</span></span>
<span class="line"><span style="color:#000000;">      ]</span></span>
<span class="line"><span style="color:#000000;">    },</span></span>
<span class="line"><span style="color:#000000;">    {</span></span>
<span class="line"><span style="color:#000000;">      label: &quot;five&quot;,</span></span>
<span class="line"><span style="color:#000000;">      type: &quot;task&quot;,</span></span>
<span class="line"><span style="color:#000000;">      nodes: [</span></span>
<span class="line"><span style="color:#000000;">        {</span></span>
<span class="line"><span style="color:#000000;">          label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#000000;">          type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">          branch: true,</span></span>
<span class="line"><span style="color:#000000;">          nodes: [</span></span>
<span class="line"><span style="color:#000000;">            {</span></span>
<span class="line"><span style="color:#000000;">              label: &quot;&lt;series&gt;&quot;,</span></span>
<span class="line"><span style="color:#000000;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">              branch: true,</span></span>
<span class="line"><span style="color:#000000;">              nodes: [</span></span>
<span class="line"><span style="color:#000000;">                {</span></span>
<span class="line"><span style="color:#000000;">                  label: &quot;one&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  nodes: []</span></span>
<span class="line"><span style="color:#000000;">                },</span></span>
<span class="line"><span style="color:#000000;">                {</span></span>
<span class="line"><span style="color:#000000;">                  label: &quot;two&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  nodes: []</span></span>
<span class="line"><span style="color:#000000;">                }</span></span>
<span class="line"><span style="color:#000000;">              ]</span></span>
<span class="line"><span style="color:#000000;">            },</span></span>
<span class="line"><span style="color:#000000;">            {</span></span>
<span class="line"><span style="color:#000000;">              label: &quot;&lt;parallel&gt;&quot;,</span></span>
<span class="line"><span style="color:#000000;">              type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">              branch: true,</span></span>
<span class="line"><span style="color:#000000;">              nodes: [</span></span>
<span class="line"><span style="color:#000000;">                {</span></span>
<span class="line"><span style="color:#000000;">                  label: &quot;three&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  nodes: []</span></span>
<span class="line"><span style="color:#000000;">                },</span></span>
<span class="line"><span style="color:#000000;">                {</span></span>
<span class="line"><span style="color:#000000;">                  label: &quot;&lt;anonymous&gt;&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  type: &quot;function&quot;,</span></span>
<span class="line"><span style="color:#000000;">                  nodes: []</span></span>
<span class="line"><span style="color:#000000;">                }</span></span>
<span class="line"><span style="color:#000000;">              ]</span></span>
<span class="line"><span style="color:#000000;">            }</span></span>
<span class="line"><span style="color:#000000;">          ]</span></span>
<span class="line"><span style="color:#000000;">        }</span></span>
<span class="line"><span style="color:#000000;">      ]</span></span>
<span class="line"><span style="color:#000000;">    }</span></span>
<span class="line"><span style="color:#000000;">  ]</span></span>
<span class="line"><span style="color:#000000;">}</span></span></code></pre></div><h2 id="函数原型​-8" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/tree#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-8" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/tree#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">tree([options])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">tree([options])</span></span></code></pre></div><h3 id="参数​-8" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/tree#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-8" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/tree#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>options</td><td>object</td><td>详情请见下文 <a href="https://www.gulpjs.com.cn/docs/api/tree#options" target="_blank" rel="noreferrer">选项</a> 。</td></tr></tbody></table><h3 id="返回值​-8" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/tree#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-8" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/tree#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个详细描述已注册的任务树的对象——包含具有 <code>&#39;label&#39;</code> 和 <code>&#39;nodes&#39;</code> 属性的嵌套对象(与 <a href="https://www.npmjs.com/package/archy" target="_blank" rel="noreferrer">archy</a> 兼容)。</p><p>每个对象可能有一个 <code>type</code> 属性，用于确定节点是 <code>task</code> 还是 <code>function</code>。</p><p>每个对象可能有一个 <code>branch</code> 属性，当 <code>true</code> 时，该属性指示节点是使用 <code>series()</code> 还是 <code>parallel()</code> 创建的。</p><h3 id="选项​-4" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/tree#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​-4" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/tree#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h3><table><thead><tr><th>name</th><th>type</th><th>default</th><th>note</th></tr></thead><tbody><tr><td>deep</td><td>boolean</td><td>false</td><td>如果为 true，则返回整个树。如果为 false，则只返回顶级任务。</td></tr></tbody></table><h1 id="vinyl" tabindex="-1">Vinyl <a class="header-anchor" href="#vinyl" aria-label="Permalink to &quot;Vinyl&quot;">​</a></h1><p>虚拟的文件格式。当 <code>src()</code> 读取文件时，将生成一个 Vinyl 对象来表示文件——包括路径、内容和其他元数据。</p><p>Vinyl 对象可以使用<a href="https://www.gulpjs.com.cn/docs/getting-started/using-plugins" target="_blank" rel="noreferrer">插件</a>进行转换。还可以使用 <code>dest()</code> 将它们持久化到文件系统。</p><p>当创建您自己的 Vinyl 对象时——而不是使用 <code>src()</code> 生成——使用外部 <code>vinyl</code> 模块，如下面的用法所示。</p><h2 id="用法​-9" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-9" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const file = new Vinyl({</span></span>
<span class="line"><span style="color:#e1e4e8;">  cwd: &#39;/&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  base: &#39;/test/&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  path: &#39;/test/file.js&#39;,</span></span>
<span class="line"><span style="color:#e1e4e8;">  contents: new Buffer(&#39;var x = 123&#39;)</span></span>
<span class="line"><span style="color:#e1e4e8;">});</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">file.relative === &#39;file.js&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">file.dirname === &#39;/test&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.dirname = &#39;/specs&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.path === &#39;/specs/file.js&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">file.basename === &#39;file.js&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.basename = &#39;file.txt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.path === &#39;/specs/file.txt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">file.stem === &#39;file&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.stem = &#39;foo&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.path === &#39;/specs/foo.txt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.extname === &#39;.txt&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.extname = &#39;.js&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">file.path === &#39;/specs/foo.js&#39;;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const file = new Vinyl({</span></span>
<span class="line"><span style="color:#000000;">  cwd: &#39;/&#39;,</span></span>
<span class="line"><span style="color:#000000;">  base: &#39;/test/&#39;,</span></span>
<span class="line"><span style="color:#000000;">  path: &#39;/test/file.js&#39;,</span></span>
<span class="line"><span style="color:#000000;">  contents: new Buffer(&#39;var x = 123&#39;)</span></span>
<span class="line"><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">file.relative === &#39;file.js&#39;;</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">file.dirname === &#39;/test&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.dirname = &#39;/specs&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.path === &#39;/specs/file.js&#39;;</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">file.basename === &#39;file.js&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.basename = &#39;file.txt&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.path === &#39;/specs/file.txt&#39;;</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">file.stem === &#39;file&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.stem = &#39;foo&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.path === &#39;/specs/foo.txt&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.extname === &#39;.txt&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.extname = &#39;.js&#39;;</span></span>
<span class="line"><span style="color:#000000;">file.path === &#39;/specs/foo.js&#39;;</span></span></code></pre></div><h2 id="函数原型​-9" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-9" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">new Vinyl([options])</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">new Vinyl([options])</span></span></code></pre></div><h3 id="参数​-9" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-9" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>options</td><td>object</td><td>详情请参加下文 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#options" target="_blank" rel="noreferrer">选项</a>。</td></tr></tbody></table><h3 id="返回值​-9" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-9" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>返回一个 Vinyl 类的实例，表示一个单独的虚拟文件，详见下面的 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#vinyl-instance" target="_blank" rel="noreferrer">Vinyl 实例</a>。</p><h3 id="可能出现的错误​-8" tabindex="-1">可能出现的错误<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF" title="Direct link to 可能出现的错误" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#可能出现的错误​-8" aria-label="Permalink to &quot;可能出现的错误[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E5%8F%AF%E8%83%BD%E5%87%BA%E7%8E%B0%E7%9A%84%E9%94%99%E8%AF%AF &quot;Direct link to 可能出现的错误&quot;)&quot;">​</a></h3><p>当传递的任何选项都不符合表中定义的<a href="https://www.gulpjs.com.cn/docs/api/vinyl#instance-properties" target="_blank" rel="noreferrer">实例属性定义</a>(如 <code>path</code> 被设置为一个数字)时抛出错误。</p><h3 id="选项​-5" tabindex="-1">选项<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E9%80%89%E9%A1%B9" title="Direct link to 选项" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#选项​-5" aria-label="Permalink to &quot;选项[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E9%80%89%E9%A1%B9 &quot;Direct link to 选项&quot;)&quot;">​</a></h3><table><thead><tr><th>名称</th><th>类型</th><th>默认住</th><th>注</th></tr></thead><tbody><tr><td>cwd</td><td>string</td><td><code>process.cwd()</code></td><td>此目录用于推导相对路径。该目录路径将被 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#normalization-and-concatenation" target="_blank" rel="noreferrer">规范化（normalized）</a> 并删除结尾的目录分隔符。</td></tr><tr><td>base</td><td>string</td><td></td><td>用于计算 <code>relative</code> 实例属性。 如果没有设置，则回退到 <code>cwd</code> 的值。通常设置为 <a href="https://www.gulpjs.com.cn/docs/api/concepts#glob-base" target="_blank" rel="noreferrer">glob base</a>。该路径将被 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#normalization-and-concatenation" target="_blank" rel="noreferrer">规范化（normalized）</a> 并删除结尾的目录分隔符。</td></tr><tr><td>path</td><td>string</td><td></td><td>完整的绝对文件路径。该路径将被 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#normalization-and-concatenation" target="_blank" rel="noreferrer">规范化（normalized）</a> 并删除结尾的目录分隔符。</td></tr><tr><td>history</td><td>array</td><td><code>[ ]</code></td><td>此路径数组用于预先填充 Vinyl 实例的 <code>history</code> 属性。通常是从先前的 Vinyl 对象衍生处新的 Vinyl 对象。通过同时传递了 <code>path</code> 和 <code>history</code> 参数，则将<code>path</code> 附加到 <code>history</code> 后面。数组中的每个条目都将被 <a href="https://www.gulpjs.com.cn/docs/api/vinyl#normalization-and-concatenation" target="_blank" rel="noreferrer">规范化（normalized）</a> 并删除结尾的目录分隔符。</td></tr><tr><td>stat</td><td>object</td><td></td><td>一个 <code>fs.Stats</code> 实例，通常是对文件调用 <code>fs.stat()</code> 的结果。用于确定 Vinyl 对象是否表示一个目录或符号链接。</td></tr><tr><td>contents</td><td>ReadableStream Buffer <code>null</code></td><td><code>null</code></td><td>文件的内容。如果 <code>contents</code> 是一个 ReadableStream，它将被包装进一个 <a href="https://github.com/mcollina/cloneable-readable" target="_blank" rel="noreferrer">cloneable-readable</a> 流(stream</td></tr><tr><td>)中。</td><td></td><td></td><td></td></tr></tbody></table><p><code>options</code> 上的任何其他属性都将直接分配给 Vinyl 实例。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const file = new Vinyl({ foo: &#39;bar&#39; });</span></span>
<span class="line"><span style="color:#e1e4e8;">file.foo === &#39;bar&#39;;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const file = new Vinyl({ foo: &#39;bar&#39; });</span></span>
<span class="line"><span style="color:#000000;">file.foo === &#39;bar&#39;;</span></span></code></pre></div><h2 id="vinyl-实例​" tabindex="-1">Vinyl 实例<a href="https://www.gulpjs.com.cn/docs/api/vinyl#vinyl-%E5%AE%9E%E4%BE%8B" title="Direct link to Vinyl 实例" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#vinyl-实例​" aria-label="Permalink to &quot;Vinyl 实例[​](https://www.gulpjs.com.cn/docs/api/vinyl#vinyl-%E5%AE%9E%E4%BE%8B &quot;Direct link to Vinyl 实例&quot;)&quot;">​</a></h2><p>每个 Vinyl 对象实例都具有访问和/或修改虚拟文件信息的属性和方法。</p><h3 id="实例属性​" tabindex="-1">实例属性<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7" title="Direct link to 实例属性" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#实例属性​" aria-label="Permalink to &quot;实例属性[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7 &quot;Direct link to 实例属性&quot;)&quot;">​</a></h3><p>所有内部管理的路径——除了 <code>contents</code> 和 <code>stat</code> 之外的任何实例属性——都被规范化，并删除了末尾分隔符。有关更多信息，请参见<a href="https://www.gulpjs.com.cn/docs/api/vinyl#normalization-and-concatenation" target="_blank" rel="noreferrer">规范化和连接</a>。</p><table><thead><tr><th>属性</th><th>类型</th><th>描述</th><th>抛出错误</th></tr></thead><tbody><tr><td>contents</td><td>ReadableStream Buffer <code>null</code></td><td>获取和设置虚拟文件的内容。如果将其设置为 ReadableStream，它将被包装在一个 <a href="https://github.com/mcollina/cloneable-readable" target="_blank" rel="noreferrer">cloneable-readable</a> 流（stream）中。</td><td>如果设置为 ReadableStream、Buffer 或 <code>null</code> 之外的任何值。</td></tr><tr><td>stat</td><td>object</td><td>获取或设置 <a href="https://www.gulpjs.com.cn/docs/api/concepts#file-system-stats" target="_blank" rel="noreferrer"><code>fs.Stats</code></a> 的实例。当确定 Vinyl 对象是否表示目录或符号链接时使用。</td><td></td></tr><tr><td>cwd</td><td>string</td><td>获取并设置当前工作目录。用于推导相对路径。</td><td>如果设置为空字符串或任何非字符串值。</td></tr><tr><td>base</td><td>string</td><td>获取和设置起始目录（base directory）。用于计算实例的 <code>relative</code> 属性。在由 <code>src()</code> 生成的 Vinyl 对象上，将设置为 <a href="https://www.gulpjs.com.cn/docs/api/concepts#glob-base" target="_blank" rel="noreferrer">glob base</a>。如果设置为 <code>null</code> 或 <code>undefined</code>，则会用实例属性 <code>cwd</code> 的值来代替。</td><td>如果设置为空字符串或任何非字符串值(<code>null</code> 或 <code>undefined</code> 除外)。</td></tr><tr><td>path</td><td>string</td><td>获取和设置完整的绝对文件路径。设置为与当前 <code>path</code> 不同的值会将新路径附加到 <code>history</code> 实例属性中。</td><td>如果设置为任何非字符串值。</td></tr><tr><td>history</td><td>array</td><td>已分配的 Vinyl 对象的所有 <code>path</code> 值的数组。第一个元素是原始路径，最后一个元素是当前路径。此属性及其包含元素应被视为只读，仅通过设置 <code>path</code> 实例属性间接更改。</td><td></td></tr><tr><td>relative</td><td>string</td><td>获取 <code>base</code> 和 <code>path</code> 实例属性之间的相对路径段。</td><td>如果设置为任何值。如果在 <code>path</code> 不可用时访问。</td></tr><tr><td>dirname</td><td>string</td><td>获取和设置 <code>path</code> 实例属性的目录。</td><td>如果在 <code>path</code> 不可用时访问。</td></tr><tr><td>stem</td><td>string</td><td>获取和设置 <code>path</code> 实例属性的不带扩展名的文件名。</td><td>如果在 <code>path</code> 不可用时访问。</td></tr><tr><td>extname</td><td>string</td><td>获取和设置 <code>path</code> 实例属性的扩展名。</td><td>如果在 <code>path</code> 不可用时访问。</td></tr><tr><td>basename</td><td>string</td><td>获取和设置 <code>path</code> 实例属性的文件名(<code>stem + extname</code>)。</td><td>如果在 <code>path</code> 不可用时访问。</td></tr><tr><td>symlink</td><td>string</td><td>获取和设置符号链接的引用路径。</td><td>如果设置为任何非字符串值。</td></tr></tbody></table><h3 id="实例方法​" tabindex="-1">实例方法<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95" title="Direct link to 实例方法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#实例方法​" aria-label="Permalink to &quot;实例方法[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95 &quot;Direct link to 实例方法&quot;)&quot;">​</a></h3><table><thead><tr><th>方法</th><th>返回值类型</th><th>返回值</th></tr></thead><tbody><tr><td><code>isBuffer()</code></td><td>boolean</td><td>如果 <code>contents</code> 实例属性是一个 Buffer，则返回 true。</td></tr><tr><td><code>isStream()</code></td><td>boolean</td><td>如果 <code>contents</code> 实例属性是一个 Stream，则返回 true。</td></tr><tr><td><code>isNull()</code></td><td>boolean</td><td>如果 <code>contents</code> 实例属性为 <code>null</code>，则返回 true。</td></tr><tr><td><code>isDirectory()</code></td><td>boolean</td><td>如果实例表示一个目录，则返回 true。当 <code>isNull()</code> 返回 true，<code>stat</code> 实例属性是一个对象，并且 <code>stat.isDirectory()</code> 返回 true 时，实例被认为是一个目录。这假设 Vinyl 对象是用一个有效的（或适当模拟的） <code>fs.Stats</code> 对象构造的。</td></tr><tr><td><code>isSymbolic()</code></td><td>boolean</td><td>如果实例表示符号链接，则返回 true。 当 <code>isNull()</code> 返回 true，<code>stat</code> 实例属性是一个对象，并且 <code>stat.isSymbolicLink()</code> 返回 true 时， 实例被认为是 symbolic。 这假设 Vinyl 对象是用一个有效的（或适当模拟的） <code>fs.Stats</code> 对象构造的。</td></tr><tr><td><code>clone([options])</code></td><td>object</td><td>A new Vinyl object with all properties cloned. 一个使用所有属性克隆出的新的 Vinyl 对象。 默认情况下，自定义属性是深拷贝。如果 <code>deep</code> 选项为 false，自定义属性将被浅拷贝。如果 <code>contents</code> 选项设置为 fasle 并且 <code>contents</code> 属性是一个 Buffer，那么这个 Buffer 将被复用，而不是克隆。</td></tr><tr><td><code>inspect()</code></td><td>string</td><td>返回 Vinyl 对象的格式化说明。由 Node 的 console.log 自动调用。</td></tr></tbody></table><h2 id="路径规范化和连接​" tabindex="-1">路径规范化和连接<a href="https://www.gulpjs.com.cn/docs/api/vinyl#%E8%B7%AF%E5%BE%84%E8%A7%84%E8%8C%83%E5%8C%96%E5%92%8C%E8%BF%9E%E6%8E%A5" title="Direct link to 路径规范化和连接" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#路径规范化和连接​" aria-label="Permalink to &quot;路径规范化和连接[​](https://www.gulpjs.com.cn/docs/api/vinyl#%E8%B7%AF%E5%BE%84%E8%A7%84%E8%8C%83%E5%8C%96%E5%92%8C%E8%BF%9E%E6%8E%A5 &quot;Direct link to 路径规范化和连接&quot;)&quot;">​</a></h2><p>所有路径属性都由它们的 setter 进行规范化。使用 <code>/</code> 连接路径，而不是使用 <code>path.join()</code>，这样就可以在所有平台上正确地进行规范化。永远不要使用 <code> 连接。（ </code> 是 POSIX 系统上的一个有效文件名字符。）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const file = new File();</span></span>
<span class="line"><span style="color:#e1e4e8;">file.path = &#39;/&#39; + &#39;test&#39; + &#39;/&#39; + &#39;foo.bar&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">console.log(file.path);</span></span>
<span class="line"><span style="color:#e1e4e8;">// posix =&gt; /test/foo.bar</span></span>
<span class="line"><span style="color:#e1e4e8;">// win32 =&gt; \test\foo.bar</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const file = new File();</span></span>
<span class="line"><span style="color:#000000;">file.path = &#39;/&#39; + &#39;test&#39; + &#39;/&#39; + &#39;foo.bar&#39;;</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">console.log(file.path);</span></span>
<span class="line"><span style="color:#000000;">// posix =&gt; /test/foo.bar</span></span>
<span class="line"><span style="color:#000000;">// win32 =&gt; \test\foo.bar</span></span></code></pre></div><h1 id="vinyl-isvinyl" tabindex="-1">Vinyl.isVinyl() <a class="header-anchor" href="#vinyl-isvinyl" aria-label="Permalink to &quot;Vinyl.isVinyl()&quot;">​</a></h1><p>检测一个对象（object）是否是一个 Vinyl 实例。不要使用 <code>instanceof</code> 方法。</p><p><strong>注意</strong>：此方法使用了 Vinyl 的一个内部属性，而这个属性在老版本的 Vinyl 中是不存在的，如果你使用的恰好时老版本，则会得到一个 fasle 结果。</p><h2 id="用法​-10" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-10" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const file = new Vinyl();</span></span>
<span class="line"><span style="color:#e1e4e8;">const notAFile = {};</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Vinyl.isVinyl(file) === true;</span></span>
<span class="line"><span style="color:#e1e4e8;">Vinyl.isVinyl(notAFile) === false;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const file = new Vinyl();</span></span>
<span class="line"><span style="color:#000000;">const notAFile = {};</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">Vinyl.isVinyl(file) === true;</span></span>
<span class="line"><span style="color:#000000;">Vinyl.isVinyl(notAFile) === false;</span></span></code></pre></div><h2 id="函数原型​-10" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-10" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Vinyl.isVinyl(file);</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">Vinyl.isVinyl(file);</span></span></code></pre></div><h3 id="参数​-10" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-10" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>注解</th></tr></thead><tbody><tr><td>file</td><td>object</td><td>需要检查的对象</td></tr></tbody></table><h3 id="返回值​-10" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-10" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/vinyl-isvinyl#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>如果 <code>file</code> 对象是 Vinyl 实例则返回 true。</p><h1 id="vinyl-iscustomprop" tabindex="-1">Vinyl.isCustomProp() <a class="header-anchor" href="#vinyl-iscustomprop" aria-label="Permalink to &quot;Vinyl.isCustomProp()&quot;">​</a></h1><p>确定一个属性是否由 Vinyl 在内部进行管理。Vinyl 在构造函数中设置值或在 <code>clone()</code> 实例方法中复制属性时使用。</p><p>这种方法在扩展 Vinyl 类时很有用。详情参见下文：<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#extending-vinyl" target="_blank" rel="noreferrer">扩展 Vinyl</a>。</p><h2 id="用法​-11" tabindex="-1">用法<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E7%94%A8%E6%B3%95" title="Direct link to 用法" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#用法​-11" aria-label="Permalink to &quot;用法[​](https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E7%94%A8%E6%B3%95 &quot;Direct link to 用法&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Vinyl.isCustomProp(&#39;sourceMap&#39;) === true;</span></span>
<span class="line"><span style="color:#e1e4e8;">Vinyl.isCustomProp(&#39;path&#39;) === false;</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">Vinyl.isCustomProp(&#39;sourceMap&#39;) === true;</span></span>
<span class="line"><span style="color:#000000;">Vinyl.isCustomProp(&#39;path&#39;) === false;</span></span></code></pre></div><h2 id="函数原型​-11" tabindex="-1">函数原型<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B" title="Direct link to 函数原型" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#函数原型​-11" aria-label="Permalink to &quot;函数原型[​](https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B &quot;Direct link to 函数原型&quot;)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Vinyl.isCustomProp(property)</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">Vinyl.isCustomProp(property)</span></span></code></pre></div><h3 id="参数​-11" tabindex="-1">参数<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E5%8F%82%E6%95%B0" title="Direct link to 参数" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#参数​-11" aria-label="Permalink to &quot;参数[​](https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E5%8F%82%E6%95%B0 &quot;Direct link to 参数&quot;)&quot;">​</a></h3><table><thead><tr><th>参数</th><th>类型</th><th>注解</th></tr></thead><tbody><tr><td>property</td><td>string</td><td>要检查的属性名。</td></tr></tbody></table><h3 id="返回值​-11" tabindex="-1">返回值<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E8%BF%94%E5%9B%9E%E5%80%BC" title="Direct link to 返回值" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#返回值​-11" aria-label="Permalink to &quot;返回值[​](https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E8%BF%94%E5%9B%9E%E5%80%BC &quot;Direct link to 返回值&quot;)&quot;">​</a></h3><p>如果属性不是内部管理的，则为 True。</p><h2 id="扩展-vinyl​" tabindex="-1">扩展 Vinyl<a href="https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E6%89%A9%E5%B1%95-vinyl" title="Direct link to 扩展 Vinyl" target="_blank" rel="noreferrer">​</a> <a class="header-anchor" href="#扩展-vinyl​" aria-label="Permalink to &quot;扩展 Vinyl[​](https://www.gulpjs.com.cn/docs/api/vinyl-iscustomprop#%E6%89%A9%E5%B1%95-vinyl &quot;Direct link to 扩展 Vinyl&quot;)&quot;">​</a></h2><p>当在内部管理自定义属性时，必须扩展静态 <code>isCustomProp</code> 方法，并在查询其中一个自定义属性时返回 false。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">const builtInProps = [&#39;foo&#39;, &#39;_foo&#39;];</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">class SuperFile extends Vinyl {</span></span>
<span class="line"><span style="color:#e1e4e8;">  constructor(options) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    super(options);</span></span>
<span class="line"><span style="color:#e1e4e8;">    this._foo = &#39;example internal read-only value&#39;;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  get foo() {</span></span>
<span class="line"><span style="color:#e1e4e8;">    return this._foo;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">  static isCustomProp(name) {</span></span>
<span class="line"><span style="color:#e1e4e8;">    return super.isCustomProp(name) &amp;&amp; builtInProps.indexOf(name) === -1;</span></span>
<span class="line"><span style="color:#e1e4e8;">  }</span></span>
<span class="line"><span style="color:#e1e4e8;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">const Vinyl = require(&#39;vinyl&#39;);</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">const builtInProps = [&#39;foo&#39;, &#39;_foo&#39;];</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">class SuperFile extends Vinyl {</span></span>
<span class="line"><span style="color:#000000;">  constructor(options) {</span></span>
<span class="line"><span style="color:#000000;">    super(options);</span></span>
<span class="line"><span style="color:#000000;">    this._foo = &#39;example internal read-only value&#39;;</span></span>
<span class="line"><span style="color:#000000;">  }</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">  get foo() {</span></span>
<span class="line"><span style="color:#000000;">    return this._foo;</span></span>
<span class="line"><span style="color:#000000;">  }</span></span>
<span class="line"><span style="color:#000000;"></span></span>
<span class="line"><span style="color:#000000;">  static isCustomProp(name) {</span></span>
<span class="line"><span style="color:#000000;">    return super.isCustomProp(name) &amp;&amp; builtInProps.indexOf(name) === -1;</span></span>
<span class="line"><span style="color:#000000;">  }</span></span>
<span class="line"><span style="color:#000000;">}</span></span></code></pre></div><p>在上面的例子中，<code>foo</code> 和 <code>_foo</code> 在克隆或将 <code>options</code> 传递给 <code>new SuperFile(options)</code> 时不会分配给新对象。</p><p>如果您的自定义属性或逻辑在克隆期间需要特殊处理，请在扩展 Vinyl 时覆盖 <code>clone</code> 方法。</p></div></div></main><footer class="VPDocFooter" data-v-e00b1889 data-v-08ebc53a><!--[--><!--]--><div class="edit-info" data-v-08ebc53a><!----><div class="last-updated" data-v-08ebc53a><p class="VPLastUpdated" data-v-08ebc53a data-v-24e6f838>Last updated: <time datetime="2025-01-28T15:07:09.000Z" data-v-24e6f838></time></p></div></div><nav class="prev-next" data-v-08ebc53a><div class="pager" data-v-08ebc53a><a class="pager-link prev" href="/Robinson/etc/gulp/src/usePlugin.html" data-v-08ebc53a><span class="desc" data-v-08ebc53a>Previous page</span><span class="title" data-v-08ebc53a>使用插件</span></a></div><div class="pager" data-v-08ebc53a><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-89b44ac5 data-v-738fa860><div class="container" data-v-738fa860><p class="message" data-v-738fa860>Released under the MIT License.</p><p class="copyright" data-v-738fa860>Copyright © 2023-present Anlijun</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"etc_doc_robinson.eventbus.clear.md\":\"30718d7d\",\"etc_apiextractor_src_quick.md\":\"c6a4986a\",\"etc_apiextractor_src_config.md\":\"d9176072\",\"etc_doc_robinson.getchunkarray.md\":\"58a1e0c5\",\"etc_doc_robinson.eventbus.md\":\"93ac9909\",\"etc_doc_robinson.blobtobase64.md\":\"ebfe3d73\",\"etc_doc_robinson.eventbus.on.md\":\"09176377\",\"etc_doc_robinson.eventbus._constructor_.md\":\"9006a46a\",\"etc_doc_robinson.formatdate.md\":\"c6fdfd11\",\"etc_doc_robinson.getfiletype.md\":\"8e1206f5\",\"etc_doc_robinson.eventbus.off.md\":\"619992a4\",\"etc_doc_robinson.calc.md\":\"31e3c629\",\"etc_doc_robinson.base64toblob.md\":\"83075a63\",\"etc_doc_robinson.imgcompression.md\":\"9a284e48\",\"etc_doc_robinson.isrange.md\":\"605a3e71\",\"etc_doc_robinson.copytoclipboard.md\":\"58fd6009\",\"etc_doc_robinson.addnode.md\":\"1be48374\",\"etc_doc_robinson.getbeforedate.md\":\"accd1d14\",\"etc_doc_robinson.isorigindate.md\":\"860748d1\",\"etc_doc_robinson.hextorgb.md\":\"993a12d2\",\"etc_doc_robinson.getetc.md\":\"33f75f22\",\"etc_doc_robinson.gettimestamp.md\":\"eda1203d\",\"etc_doc_robinson.getdiff.md\":\"07cb4b95\",\"etc_doc_robinson.currying.md\":\"bd73687b\",\"etc_doc_robinson.bind.md\":\"95d4d71b\",\"etc_doc_robinson.isarray.md\":\"f0486949\",\"etc_doc_robinson.removeclass.md\":\"321f7889\",\"etc_doc_robinson.isfunction.md\":\"ee24fcb4\",\"etc_doc_robinson.parsergbacolor.md\":\"13e0c7ed\",\"etc_doc_robinson.torgbastring.md\":\"ce94e447\",\"etc_doc_robinson.getafterdate.md\":\"4d077786\",\"etc_doc_robinson.getfilesize.md\":\"a460956e\",\"etc_doc_robinson.debounce.md\":\"b0ea2133\",\"etc_doc_robinson.nodetostring.md\":\"56a82854\",\"etc_doc_index.md\":\"8d24a4c8\",\"etc_doc_robinson.getuniqueid.md\":\"894c4cb1\",\"etc_doc_robinson.issimpletype.md\":\"4f7ed8b4\",\"etc_doc_robinson.addclass.md\":\"dc574d8b\",\"etc_doc_robinson.eventbus.emit.md\":\"c00e8f7f\",\"etc_doc_robinson.ismobilenum.md\":\"248ea48d\",\"etc_doc_robinson.isobjectlike.md\":\"09533329\",\"etc_changelog.md\":\"9487cb5a\",\"etc_doc_robinson.deepclone.md\":\"126286e5\",\"etc_doc_robinson.isnumber.md\":\"86c15867\",\"etc_doc_robinson.unbind.md\":\"a9448367\",\"etc_doc_robinson.downloadbyurl.md\":\"6fd53658\",\"etc_doc_robinson.isnull.md\":\"b2f40b4b\",\"etc_doc_robinson.getnodes.md\":\"17cc5e4c\",\"etc_doc_robinson.isfinite_2.md\":\"4146a912\",\"etc_doc_robinson.preventdefault.md\":\"93cf6296\",\"etc_doc_robinson.downloadbyblob.md\":\"f5f5baf3\",\"etc_doc_robinson.downloadbybase64.md\":\"d3013dfd\",\"etc_doc_robinson.removenode.md\":\"eab7738d\",\"etc_doc_robinson.compose.md\":\"28b866f7\",\"etc_doc_robinson.insertstr.md\":\"db131108\",\"etc_doc_robinson.isrgb.md\":\"72848a32\",\"etc_doc_robinson.getnode.md\":\"8e25958b\",\"etc_doc_robinson.throttle.md\":\"527844f5\",\"etc_doc_robinson.pipe.md\":\"4191452c\",\"etc_doc_robinson.createcache.md\":\"d90a3c87\",\"etc_doc_robinson.ishex.md\":\"9a87bb4b\",\"etc_doc_robinson.isreftype.md\":\"e6196c35\",\"etc_doc_robinson.isrgba.md\":\"4bec6717\",\"etc_doc_robinson.stoppropagation.md\":\"16606724\",\"etc_doc_robinson.isexternal.md\":\"ad7ecb0a\",\"etc_doc_robinson.isboolean.md\":\"2c0cf9de\",\"etc_doc_robinson.hastypein.md\":\"7ad41639\",\"etc_doc_robinson.hasclass.md\":\"b1256a03\",\"etc_doc_robinson.iselement.md\":\"d4036530\",\"etc_doc_robinson.printbyblob.md\":\"8e7219c8\",\"etc_doc_robinson.is.md\":\"925da006\",\"etc_doc_robinson.issymbol.md\":\"abf59805\",\"etc_doc_robinson.isundefined.md\":\"bf114110\",\"etc_doc_robinson.ispromise.md\":\"6414ed13\",\"etc_doc_robinson.hextorgba.md\":\"6beaeccd\",\"etc_doc_robinson.rgbatohex.md\":\"820ea46c\",\"etc_doc_robinson.isdecimal.md\":\"f53786ca\",\"etc_doc_robinson.replacenode.md\":\"d53fe3ee\",\"etc_doc_robinson.isafter.md\":\"6a375f80\",\"etc_doc_robinson.isie.md\":\"adbb0e5e\",\"etc_gulp_src_introduce.md\":\"049c736f\",\"etc_jest_src_introduction.md\":\"1ef01d20\",\"etc_doc_robinson.asigndata.md\":\"af995af0\",\"etc_doc_robinson.isleapyear.md\":\"79e8b8e7\",\"etc_doc_robinson.iseqvalue.md\":\"dc15e6a8\",\"etc_doc_robinson.stringtonode.md\":\"ecd722bd\",\"etc_doc_robinson.mapping.md\":\"325ad453\",\"etc_doc_robinson.isnode.md\":\"338cfa4c\",\"etc_doc_robinson.isregexp.md\":\"a173ddb9\",\"etc_doc_robinson.replaceclass.md\":\"4da92d64\",\"etc_doc_robinson.urltobase64.md\":\"38de1409\",\"etc_doc_robinson.isempty.md\":\"ae46b9c2\",\"etc_doc_robinson.printbydom.md\":\"3739ed22\",\"etc_doc_robinson.parsehexcolor.md\":\"a07c16b3\",\"etc_doc_robinson.getfilechunk.md\":\"d4ca9453\",\"etc_doc_robinson.getrandom.md\":\"7d2632cc\",\"etc_doc_robinson.iseqtype.md\":\"453183b5\",\"etc_rollup_src_introduce.md\":\"86e9735c\",\"etc_vitepress_src_introduce.md\":\"cc078dd0\",\"etc_doc_robinson.isstring.md\":\"79f51ee2\",\"etc_doc_robinson.isbefore.md\":\"cdc880cd\",\"etc_doc_robinson.getrelarray.md\":\"1688bd6d\",\"etc_doc_robinson.isurl.md\":\"fdb810cd\",\"etc_vitepress_src_internation.md\":\"da2319b4\",\"etc_doc_robinson.getmimetype.md\":\"c54abd05\",\"etc_doc_robinson.md\":\"16657074\",\"etc_doc_robinson.isidcard.md\":\"f503c73b\",\"etc_doc_robinson.transhightlight.md\":\"c242f743\",\"etc_gulp_src_core.md\":\"e5b6600b\",\"etc_doc_robinson.isemail.md\":\"1c86308d\",\"etc_rollup_src_howwork.md\":\"500b38b0\",\"etc_jest_src_introduce.md\":\"02466b02\",\"etc_rollup_src_more.md\":\"1aa0a287\",\"etc_vitepress_src_router.md\":\"bc12d89e\",\"etc_doc_robinson.rgbtohex.md\":\"9bbcc567\",\"etc_vitepress_src_install.md\":\"fb5d8a95\",\"etc_doc_robinson.parsecolorstring.md\":\"b0540816\",\"etc_gulp_src_quick.md\":\"a4e9e408\",\"etc_rollup_src_scope.md\":\"1eab423a\",\"etc_rollup_src_dev.md\":\"792fd49a\",\"index.md\":\"15d91308\",\"etc_vitepress_src_build.md\":\"62f6da5b\",\"etc_doc_robinson.isnan_2.md\":\"0c4f2673\",\"etc_rollup_src_quick.md\":\"8c30c550\",\"etc_doc_robinson.isint.md\":\"c873d27f\",\"etc_jest_src_testasync.md\":\"334de0a1\",\"etc_jest_src_average.md\":\"6ec7950b\",\"etc_jest_src_quick.md\":\"4a0b924e\",\"etc_rollup_src_circulardev.md\":\"4c9e8633\",\"etc_report.md\":\"3ed6d021\",\"etc_jest_src_install.md\":\"ed09bd4a\",\"etc_rollup_src_treeshaking.md\":\"332e04f6\",\"etc_jest_src_mockfun.md\":\"f36152b1\",\"etc_gulp_src_file.md\":\"92b4fae4\",\"etc_rollup_src_use.md\":\"1c1d5168\",\"etc_rollup_src_withts.md\":\"0657731d\",\"etc_jest_src_report.md\":\"81d6b763\",\"etc_doc_robinson.rendertmp.md\":\"d9bfde59\",\"etc_vitepress_src_withvue.md\":\"9bb95e3a\",\"etc_apiextractor_src_introduce.md\":\"554f1e37\",\"etc_rollup_src_withvue.md\":\"f5712570\",\"etc_vitepress_src_mdlang.md\":\"3343feb2\",\"etc_rollup_src_core.md\":\"f97316a8\",\"etc_gulp_src_useplugin.md\":\"fe27adfb\",\"etc_vitepress_src_search.md\":\"862d8b22\",\"etc_rollup_src_advance.md\":\"06088c72\",\"etc_jest_src_use.md\":\"8947431a\",\"etc_vitepress_src_theme.md\":\"553684dc\",\"temp_robinson.api.md\":\"8e9fea34\",\"etc_gulp_src_other.md\":\"9c8e9772\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Robinson\",\"description\":\"Documentations of @taiyuuki/utils\",\"base\":\"/Robinson/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/index.html\"},{\"text\":\"API\",\"items\":[{\"text\":\"1.x 文档\",\"link\":\"/etc/doc/index\"}]},{\"text\":\"测试报告\",\"link\":\"/etc/report\"},{\"text\":\"更新日志\",\"link\":\"/etc/changelog\"},{\"text\":\"工程化\",\"items\":[{\"text\":\"Rollup文档\",\"link\":\"/etc/rollup/src/introduce\"},{\"text\":\"Jest文档\",\"link\":\"/etc/jest/src/introduction\"},{\"text\":\"vitepress文档\",\"link\":\"/etc/vitepress/src/introduce\"},{\"text\":\"apiExtractor文档\",\"link\":\"/etc/apiExtractor/src/introduce\"},{\"text\":\"gulp文档\",\"link\":\"/etc/gulp/src/introduce\"}]}],\"sidebar\":{\"etc/doc\":[{\"text\":\"API\",\"items\":[{\"text\":\"web\",\"collapsed\":true,\"items\":[{\"text\":\"addClass\",\"link\":\"/etc/doc/robinson.addclass.md\"},{\"text\":\"addNode\",\"link\":\"/etc/doc/robinson.addnode.md\"},{\"text\":\"bind\",\"link\":\"/etc/doc/robinson.bind.md\"},{\"text\":\"copyToClipboard\",\"link\":\"/etc/doc/robinson.copytoclipboard.md\"},{\"text\":\"createCache\",\"link\":\"/etc/doc/robinson.createcache.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"EventBus\",\"link\":\"/etc/doc/robinson.eventbus.md\"},{\"text\":\"getNode\",\"link\":\"/etc/doc/robinson.getnode.md\"},{\"text\":\"getNodes\",\"link\":\"/etc/doc/robinson.getnodes.md\"},{\"text\":\"hasClass\",\"link\":\"/etc/doc/robinson.hasclass.md\"},{\"text\":\"isNode\",\"link\":\"/etc/doc/robinson.isnode.md\"},{\"text\":\"nodeToString\",\"link\":\"/etc/doc/robinson.nodetostring.md\"},{\"text\":\"preventDefault\",\"link\":\"/etc/doc/robinson.preventdefault.md\"},{\"text\":\"removeClass\",\"link\":\"/etc/doc/robinson.removeclass.md\"},{\"text\":\"removeNode\",\"link\":\"/etc/doc/robinson.removenode.md\"},{\"text\":\"renderTmp\",\"link\":\"/etc/doc/robinson.rendertmp.md\"},{\"text\":\"replaceClass\",\"link\":\"/etc/doc/robinson.replaceclass.md\"},{\"text\":\"replaceNode\",\"link\":\"/etc/doc/robinson.replacenode.md\"},{\"text\":\"stopPropagation\",\"link\":\"/etc/doc/robinson.stoppropagation.md\"},{\"text\":\"stringToNode\",\"link\":\"/etc/doc/robinson.stringtonode.md\"},{\"text\":\"transHightLight\",\"link\":\"/etc/doc/robinson.transhightlight.md\"},{\"text\":\"unBind\",\"link\":\"/etc/doc/robinson.unbind.md\"}]},{\"text\":\"function\",\"collapsed\":true,\"items\":[{\"text\":\"asignData\",\"link\":\"/etc/doc/robinson.asigndata.md\"},{\"text\":\"compose\",\"link\":\"/etc/doc/robinson.compose.md\"},{\"text\":\"currying\",\"link\":\"/etc/doc/robinson.currying.md\"},{\"text\":\"debounce\",\"link\":\"/etc/doc/robinson.debounce.md\"},{\"text\":\"deepClone\",\"link\":\"/etc/doc/robinson.deepclone.md\"},{\"text\":\"isFunction\",\"link\":\"/etc/doc/robinson.isfunction.md\"},{\"text\":\"mapping\",\"link\":\"/etc/doc/robinson.mapping.md\"},{\"text\":\"pipe\",\"link\":\"/etc/doc/robinson.pipe.md\"},{\"text\":\"throttle\",\"link\":\"/etc/doc/robinson.throttle.md\"}]},{\"text\":\"file\",\"collapsed\":true,\"items\":[{\"text\":\"base64ToBlob\",\"link\":\"/etc/doc/robinson.base64toblob.md\"},{\"text\":\"blobToBase64\",\"link\":\"/etc/doc/robinson.blobtobase64.md\"},{\"text\":\"downloadByBase64\",\"link\":\"/etc/doc/robinson.downloadbybase64.md\"},{\"text\":\"downloadByBlob\",\"link\":\"/etc/doc/robinson.downloadbyblob.md\"},{\"text\":\"downloadByUrl\",\"link\":\"/etc/doc/robinson.downloadbyurl.md\"},{\"text\":\"getFileChunk\",\"link\":\"/etc/doc/robinson.getfilechunk.md\"},{\"text\":\"getFileSize\",\"link\":\"/etc/doc/robinson.getfilesize.md\"},{\"text\":\"getFileType\",\"link\":\"/etc/doc/robinson.getfiletype.md\"},{\"text\":\"getMimeType\",\"link\":\"/etc/doc/robinson.getmimetype.md\"},{\"text\":\"imgCompression\",\"link\":\"/etc/doc/robinson.imgcompression.md\"},{\"text\":\"printByBlob\",\"link\":\"/etc/doc/robinson.printbyblob.md\"},{\"text\":\"printByDom\",\"link\":\"/etc/doc/robinson.printbydom.md\"},{\"text\":\"urlToBase64\",\"link\":\"/etc/doc/robinson.urltobase64.md\"}]},{\"text\":\"math\",\"collapsed\":true,\"items\":[{\"text\":\"calc\",\"link\":\"/etc/doc/robinson.calc.md\"}]},{\"text\":\"date\",\"collapsed\":true,\"items\":[{\"text\":\"formatDate\",\"link\":\"/etc/doc/robinson.formatdate.md\"},{\"text\":\"getAfterDate\",\"link\":\"/etc/doc/robinson.getafterdate.md\"},{\"text\":\"getBeforeDate\",\"link\":\"/etc/doc/robinson.getbeforedate.md\"},{\"text\":\"getDiff\",\"link\":\"/etc/doc/robinson.getdiff.md\"},{\"text\":\"getTimestamp\",\"link\":\"/etc/doc/robinson.gettimestamp.md\"},{\"text\":\"isAfter\",\"link\":\"/etc/doc/robinson.isafter.md\"},{\"text\":\"isBefore\",\"link\":\"/etc/doc/robinson.isbefore.md\"},{\"text\":\"isLeapYear\",\"link\":\"/etc/doc/robinson.isleapyear.md\"}]},{\"text\":\"array\",\"collapsed\":true,\"items\":[{\"text\":\"getChunkArray\",\"link\":\"/etc/doc/robinson.getchunkarray.md\"},{\"text\":\"getRelArray\",\"link\":\"/etc/doc/robinson.getrelarray.md\"},{\"text\":\"isArray\",\"link\":\"/etc/doc/robinson.isarray.md\"}]},{\"text\":\"string\",\"collapsed\":true,\"items\":[{\"text\":\"getEtc\",\"link\":\"/etc/doc/robinson.getetc.md\"},{\"text\":\"getUniqueId\",\"link\":\"/etc/doc/robinson.getuniqueid.md\"},{\"text\":\"insertStr\",\"link\":\"/etc/doc/robinson.insertstr.md\"},{\"text\":\"isEmail\",\"link\":\"/etc/doc/robinson.isemail.md\"},{\"text\":\"isExternal\",\"link\":\"/etc/doc/robinson.isexternal.md\"},{\"text\":\"isIdCard\",\"link\":\"/etc/doc/robinson.isidcard.md\"},{\"text\":\"isMobileNum\",\"link\":\"/etc/doc/robinson.ismobilenum.md\"},{\"text\":\"isString\",\"link\":\"/etc/doc/robinson.isstring.md\"},{\"text\":\"isUrl\",\"link\":\"/etc/doc/robinson.isurl.md\"}]},{\"text\":\"number\",\"collapsed\":true,\"items\":[{\"text\":\"getRandom\",\"link\":\"/etc/doc/robinson.getrandom.md\"},{\"text\":\"isDecimal\",\"link\":\"/etc/doc/robinson.isdecimal.md\"},{\"text\":\"isInt\",\"link\":\"/etc/doc/robinson.isint.md\"},{\"text\":\"isNumber\",\"link\":\"/etc/doc/robinson.isnumber.md\"},{\"text\":\"isRange\",\"link\":\"/etc/doc/robinson.isrange.md\"}]},{\"text\":\"common\",\"collapsed\":true,\"items\":[{\"text\":\"hasTypeIn\",\"link\":\"/etc/doc/robinson.hastypein.md\"},{\"text\":\"is\",\"link\":\"/etc/doc/robinson.is.md\"},{\"text\":\"isEmpty\",\"link\":\"/etc/doc/robinson.isempty.md\"},{\"text\":\"isEqType\",\"link\":\"/etc/doc/robinson.iseqtype.md\"},{\"text\":\"isEqValue\",\"link\":\"/etc/doc/robinson.iseqvalue.md\"},{\"text\":\"isNull\",\"link\":\"/etc/doc/robinson.isnull.md\"},{\"text\":\"isRefType\",\"link\":\"/etc/doc/robinson.isreftype.md\"},{\"text\":\"isSimpleType\",\"link\":\"/etc/doc/robinson.issimpletype.md\"},{\"text\":\"isUndefined\",\"link\":\"/etc/doc/robinson.isundefined.md\"}]},{\"text\":\"color\",\"collapsed\":true,\"items\":[{\"text\":\"hexToRgb\",\"link\":\"/etc/doc/robinson.hextorgb.md\"},{\"text\":\"hexToRgba\",\"link\":\"/etc/doc/robinson.hextorgba.md\"},{\"text\":\"isHex\",\"link\":\"/etc/doc/robinson.ishex.md\"},{\"text\":\"isRgb\",\"link\":\"/etc/doc/robinson.isrgb.md\"},{\"text\":\"isRgba\",\"link\":\"/etc/doc/robinson.isrgba.md\"},{\"text\":\"parseColorString\",\"link\":\"/etc/doc/robinson.parsecolorstring.md\"},{\"text\":\"parseHexColor\",\"link\":\"/etc/doc/robinson.parsehexcolor.md\"},{\"text\":\"parseRgbaColor\",\"link\":\"/etc/doc/robinson.parsergbacolor.md\"},{\"text\":\"rgbaToHex\",\"link\":\"/etc/doc/robinson.rgbatohex.md\"},{\"text\":\"rgbToHex\",\"link\":\"/etc/doc/robinson.rgbtohex.md\"},{\"text\":\"toRgbaString\",\"link\":\"/etc/doc/robinson.torgbastring.md\"}]},{\"text\":\"boolean\",\"collapsed\":true,\"items\":[{\"text\":\"isBoolean\",\"link\":\"/etc/doc/robinson.isboolean.md\"}]},{\"text\":\"object\",\"collapsed\":true,\"items\":[{\"text\":\"isElement\",\"link\":\"/etc/doc/robinson.iselement.md\"},{\"text\":\"isIE\",\"link\":\"/etc/doc/robinson.isie.md\"},{\"text\":\"isObjectLike\",\"link\":\"/etc/doc/robinson.isobjectlike.md\"},{\"text\":\"isOriginDate\",\"link\":\"/etc/doc/robinson.isorigindate.md\"},{\"text\":\"isPromise\",\"link\":\"/etc/doc/robinson.ispromise.md\"},{\"text\":\"isRegExp\",\"link\":\"/etc/doc/robinson.isregexp.md\"}]},{\"text\":\"symbol\",\"collapsed\":true,\"items\":[{\"text\":\"isSymbol\",\"link\":\"/etc/doc/robinson.issymbol.md\"}]},{\"text\":\"helper\",\"collapsed\":true,\"items\":[]}]}],\"etc/rollup/src\":[{\"text\":\"rollup\",\"items\":[{\"text\":\"介绍\",\"link\":\"/etc/rollup/src/introduce.md\"},{\"text\":\"快速上手\",\"link\":\"/etc/rollup/src/quick.md\"},{\"text\":\"核心概念\",\"link\":\"/etc/rollup/src/core.md\"},{\"text\":\"进阶\",\"link\":\"/etc/rollup/src/advance.md\"},{\"text\":\"作用域提升\",\"link\":\"/etc/rollup/src/scope.md\"},{\"text\":\"处理循环依赖\",\"link\":\"/etc/rollup/src/circularDev.md\"},{\"text\":\"集成TS\",\"link\":\"/etc/rollup/src/withTs.md\"},{\"text\":\"集成Vue\",\"link\":\"/etc/rollup/src/withVue.md\"},{\"text\":\"怎样工作的\",\"link\":\"/etc/rollup/src/howWork.md\"},{\"text\":\"使用缓存\",\"link\":\"/etc/rollup/src/use.md\"},{\"text\":\"treeShaking\",\"link\":\"/etc/rollup/src/treeshaking.md\"},{\"text\":\"优化\",\"link\":\"/etc/rollup/src/more.md\"},{\"text\":\"开发插件\",\"link\":\"/etc/rollup/src/dev.md\"}]}],\"etc/jest/src\":[{\"text\":\"rollup\",\"items\":[{\"text\":\"引言\",\"link\":\"/etc/jest/src/introduction.md\"},{\"text\":\"介绍\",\"link\":\"/etc/jest/src/introduce.md\"},{\"text\":\"安装与环境配置\",\"link\":\"/etc/jest/src/install.md\"},{\"text\":\"断言\",\"link\":\"/etc/jest/src/average.md\"},{\"text\":\"测试异步函数\",\"link\":\"/etc/jest/src/testAsync.md\"},{\"text\":\"模拟函数\",\"link\":\"/etc/jest/src/mockFun.md\"},{\"text\":\"快照\",\"link\":\"/etc/jest/src/quick.md\"},{\"text\":\"测试覆盖率\",\"link\":\"/etc/jest/src/report.md\"},{\"text\":\"不同场景的使用\",\"link\":\"/etc/jest/src/use.md\"}]}],\"etc/vitepress/src\":[{\"text\":\"vitepress\",\"items\":[{\"text\":\"介绍\",\"link\":\"/etc/vitepress/src/introduce.md\"},{\"text\":\"安装\",\"link\":\"/etc/vitepress/src/install.md\"},{\"text\":\"路由\",\"link\":\"/etc/vitepress/src/router.md\"},{\"text\":\"部署\",\"link\":\"/etc/vitepress/src/build.md\"},{\"text\":\"markDown语法与扩展\",\"link\":\"/etc/vitepress/src/mdLang.md\"},{\"text\":\"使用vue\",\"link\":\"/etc/vitepress/src/withVue.md\"},{\"text\":\"国际化\",\"link\":\"/etc/vitepress/src/internation.md\"},{\"text\":\"默认主题\",\"link\":\"/etc/vitepress/src/theme.md\"},{\"text\":\"搜索\",\"link\":\"/etc/vitepress/src/search.md\"}]}],\"etc/apiExtractor/src\":[{\"text\":\"apiExtractor\",\"items\":[{\"text\":\"介绍\",\"link\":\"/etc/apiExtractor/src/introduce.md\"},{\"text\":\"快速上手\",\"link\":\"/etc/apiExtractor/src/quick.md\"},{\"text\":\"配置\",\"link\":\"/etc/apiExtractor/src/config.md\"}]}],\"etc/gulp/src\":[{\"text\":\"gulp\",\"items\":[{\"text\":\"介绍\",\"link\":\"/etc/gulp/src/introduce.md\"},{\"text\":\"快速上手\",\"link\":\"/etc/gulp/src/quick.md\"},{\"text\":\"核心概念\",\"link\":\"/etc/gulp/src/core.md\"},{\"text\":\"使用插件\",\"link\":\"/etc/gulp/src/usePlugin.md\"},{\"text\":\"其他\",\"link\":\"/etc/gulp/src/other.md\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/An-Lijun/Robinson\"}],\"search\":{\"provider\":\"local\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023-present Anlijun\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>